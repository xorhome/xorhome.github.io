import{b as e,a as l,A as a}from"./index.DRE4Ui8P.js";import{d as t,r as s,G as c,W as o,Q as r,h as n,j as d,k as u,l as x,t as i,v as f,q as m,n as p,p as _,F as b,R as v,J as y,S as g,T as h,V as w,L as F,A as k,_ as z,U as j,I as C,X as L,s as M}from"./index-Cq9VOZ8T.js";import{_ as U}from"./MyIcon.DtsftdS0.js";import{_ as V}from"./wd-img.CYUre-6y.js";import{M as B}from"./index.CKr23U1R.js";import{u as G}from"./account.G0aekY3X.js";import{t as O}from"./throttle.P4z1NBKD.js";import"./index.DMLUgklw.js";const q=t({__name:"miner",setup(t){const q=s([]),A=s({active_count:0,golds_per_block:0,chests_per_block:0,blocks_per_hour:0,golds_per_hour:0,chests_per_hour:0}),D=s(),I=c((()=>q.value.findIndex((e=>!e.active)))),T=o(),E=s(!1),J=s(!1),P=s(0),Q=c((()=>q.value[P.value]));function R(){g(),B.minerList().then((e=>{const l=e||{};q.value=(null==l?void 0:l.miners)||[],A.value=(null==l?void 0:l.summary)||{}})).finally(h)}function S(){J.value=!1,O((()=>{g(),B.currentMiner(P.value).then((e=>{console.log(e),T.success("Unlock successfully"),R()})).finally((()=>{h()}))}))}return function(){const{getUserAssets:e}=G();e([a.GOLD]).then((e=>{D.value=e}))}(),R(),(t,s)=>{const c=w,o=F,g=k,h=z,B=V,G=j,O=C,T=U,R=L,W=r("layout-default-uni");return n(),d(W,null,{default:u((()=>[x(g,null,{default:u((()=>[x(g,{class:"flex-center p-y-50rpx"},{default:u((()=>[x(c,{src:"/static/home/car.png",mode:"scaleToFill",class:"mr-36rpx h-46rpx w-64rpx"}),x(o,{class:"text-title text-white"},{default:u((()=>[i(" Miner ")])),_:1})])),_:1}),x(g,{class:"flex-center"},{default:u((()=>[x(o,{class:"mr-3 text-md color-desc"},{default:u((()=>[i(" Total profit per hour ")])),_:1}),x(h,{name:"/static/icon/coin_bit.png",size:"30rpx"}),x(o,{class:"m-x-3 text-md color-desc"},{default:u((()=>[i(" + "+f(("balanceFormat"in t?t.balanceFormat:m(e))(m(A).golds_per_hour)),1)])),_:1}),x(h,{name:"/static/icon/baoxiang.png",size:"30rpx"}),x(o,{class:"ml-3 text-md color-desc"},{default:u((()=>[i(" + "+f(("balanceFormat"in t?t.balanceFormat:m(e))(m(A).chests_per_hour)),1)])),_:1})])),_:1}),x(g,null,{default:u((()=>[(n(!0),p(b,null,_(m(q),((l,a)=>(n(),d(g,{key:a,class:"box-border p-x-32rpx p-y-20rpx"},{default:u((()=>[x(g,{class:M(["box-border flex-y-center rounded-3 bg-cell p-24rpx",{"color-white":l.active,"color-desc":!l.active}])},{default:u((()=>[x(g,{class:"mr-24rpx h-110rpx w-110rpx flex-center rounded-3 bg-cell-icon"},{default:u((()=>[x(o,{class:"text-title"},{default:u((()=>[i(" #"+f(a+1),1)])),_:2},1024)])),_:2},1024),x(g,{class:"flex flex-1 flex-col"},{default:u((()=>[x(g,{class:"flex-y-center"},{default:u((()=>[x(o,{class:"text-lg"},{default:u((()=>[i(" Minner "+f(l.name),1)])),_:2},1024),x(o,{class:"m-x-1"},{default:u((()=>[i(" - ")])),_:1}),x(o,{class:M(["text-lg",{"color-value":l.active,"color-desc":!l.active}])},{default:u((()=>[i(" Level "+f(l.level),1)])),_:2},1032,["class"])])),_:2},1024),l.active?(n(),p(b,{key:0},[x(g,{class:"m-y-12rpx flex-y-center"},{default:u((()=>[x(o,{class:"text-sm color-desc"},{default:u((()=>[i(" Offline work for ")])),_:1}),x(o,{class:"p-x-1 text-sm color-value"},{default:u((()=>[i(" 3 ")])),_:1}),x(o,{class:"text-sm color-desc"},{default:u((()=>[i(" hours ")])),_:1})])),_:1}),x(g,{class:"flex-x-between"},{default:u((()=>[x(g,{class:"flex-y-center"},{default:u((()=>[x(h,{name:"/static/icon/coin_bit.png",size:"25rpx"}),x(o,{class:"m-x-1 text-sm color-desc"},{default:u((()=>{var a;return[i(" + "+f(("balanceFormat"in t?t.balanceFormat:m(e))(null==(a=null==l?void 0:l.value)?void 0:a.golds_per_hour))+" / hour ",1)]})),_:2},1024)])),_:2},1024),x(g,{class:"flex-y-center"},{default:u((()=>[x(h,{name:"/static/icon/baoxiang.png",size:"25rpx"}),x(o,{class:"ml-1 text-sm color-desc"},{default:u((()=>{var a;return[i(" + "+f(("balanceFormat"in t?t.balanceFormat:m(e))(null==(a=null==l?void 0:l.value)?void 0:a.chests_per_hour))+" / hour ",1)]})),_:2},1024)])),_:2},1024)])),_:2},1024)],64)):(n(),d(g,{key:1,class:"m-y-12rpx flex-y-center"},{default:u((()=>[x(o,{class:"pr-20rpx text-sm color-desc"},{default:u((()=>[i(" Unlock requires ")])),_:1}),l.next.cost.golds>0?(n(),d(g,{key:0,class:"ml-12rpx flex-y-center"},{default:u((()=>[x(h,{name:"/static/icon/coin_bit.png",size:"25rpx"}),x(o,{class:"p-x-1 text-sm color-desc"},{default:u((()=>[i(f(l.next.cost.golds),1)])),_:2},1024)])),_:2},1024)):y("",!0),l.next.cost.diamonds>0?(n(),d(g,{key:1,class:"ml-12rpx flex-y-center"},{default:u((()=>[x(h,{name:"/static/icons/diamond.png",size:"25rpx"}),x(o,{class:"p-x-1 text-sm color-desc"},{default:u((()=>[i(f(l.next.cost.diamonds),1)])),_:2},1024)])),_:2},1024)):y("",!0)])),_:2},1024))])),_:2},1024),x(g,null,{default:u((()=>[l.active?(n(),d(h,{key:0,name:"arrow-right",size:"44rpx",color:"#aaaaaa"})):!l.active&&m(I)>=0&&m(I)===a?(n(),d(h,{key:1,name:"/static/icon/unlock.png",size:"60rpx",onClick:e=>{return l=a,P.value=l,void(J.value=!0);var l}},null,8,["onClick"])):(n(),d(h,{key:2,name:"/static/icon/lock.png",size:"60rpx"}))])),_:2},1024)])),_:2},1032,["class"])])),_:2},1024)))),128))])),_:1}),x(O,{modelValue:m(J),"onUpdate:modelValue":s[1]||(s[1]=e=>v(J)?J.value=e:null),"z-index":9999,position:"bottom","custom-style":"background: unset;","safe-area-inset-bottom":"",onClose:s[2]||(s[2]=e=>J.value=!1)},{default:u((()=>[x(g,{class:"box-border w-100vw flex-center px pb-100rpx"},{default:u((()=>[x(g,{class:"box-border w-full flex-center flex-col rounded-t-3 bg-popup p-40rpx"},{default:u((()=>[x(g,{class:"w-full flex-x-between"},{default:u((()=>[x(o,{class:"text-lg color-white"},{default:u((()=>[i(" Minner "+f(m(Q).name),1)])),_:1}),x(h,{name:"close",size:"32rpx",color:"#FFFFFF",onClick:s[0]||(s[0]=e=>J.value=!1)})])),_:1}),x(g,{class:"my-36rpx flex-center"},{default:u((()=>[x(o,{class:"px-12rpx text-title color-value"},{default:u((()=>[i(" Level "+f(m(Q).level),1)])),_:1})])),_:1}),x(g,{class:"mb-32rpx flex-y-center"},{default:u((()=>[x(o,{class:"pr-16rpx text-sm color-desc"},{default:u((()=>[i(" Balance ")])),_:1}),x(h,{name:"/static/icon/coin_bit.png",size:"30rpx"}),x(o,{class:"m-x-3 text-sm color-desc"},{default:u((()=>[i(f(("assetBalanceFormat"in t?t.assetBalanceFormat:m(l))(m(D),m(a).GOLD)),1)])),_:1})])),_:1}),x(g,{class:"w-full flex-center"},{default:u((()=>[x(G,{type:"primary",round:!1,block:"","custom-class":"rounded-3 flex-1 h-76rpx",onClick:S},{default:u((()=>[x(g,{class:"w-full flex-center"},{default:u((()=>[x(g,{class:"flex-y-center"},{default:u((()=>[x(B,{src:"/static/icons/gold.png","custom-class":"h-25rpx w-25rpx"}),x(o,{class:"m-x-1 text-md color-white"},{default:u((()=>[i(f(("balanceFormat"in t?t.balanceFormat:m(e))(m(Q).next.cost.golds)),1)])),_:1})])),_:1}),m(Q).next.cost.diamonds>0?(n(),d(g,{key:0,class:"flex-y-center"},{default:u((()=>[x(B,{src:"/static/icons/diamond.png","custom-class":"h-25rpx w-25rpx"}),x(o,{class:"ml-1 text-md color-white"},{default:u((()=>[i(" + "+f(("balanceFormat"in t?t.balanceFormat:m(e))(m(Q).next.cost.diamonds)),1)])),_:1})])),_:1})):y("",!0),x(o,{class:"ml-1 text-md color-white"},{default:u((()=>[i(" Unlock ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),x(O,{modelValue:m(E),"onUpdate:modelValue":s[4]||(s[4]=e=>v(E)?E.value=e:null),"z-index":9999,position:"bottom","custom-style":"background: unset;","safe-area-inset-bottom":"",onClose:s[5]||(s[5]=e=>E.value=!1)},{default:u((()=>[x(g,{class:"box-border w-100vw flex-center px pb-100rpx"},{default:u((()=>[x(g,{class:"box-border w-full flex-center flex-col rounded-t-3 bg-popup p-40rpx"},{default:u((()=>[x(g,{class:"w-full flex-x-between"},{default:u((()=>[x(o,{class:"text-lg color-white"},{default:u((()=>[i(" Minner "+f(m(Q).name),1)])),_:1}),x(h,{name:"close",size:"32rpx",color:"#FFFFFF",onClick:s[3]||(s[3]=e=>E.value=!1)})])),_:1}),x(g,{class:"my-36rpx flex-center"},{default:u((()=>[x(o,{class:"px-12rpx text-title color-value"},{default:u((()=>[i(" Level "+f(m(Q).level),1)])),_:1})])),_:1}),x(g,{class:"mb-32rpx flex-y-center"},{default:u((()=>[x(o,{class:"pr-16rpx text-sm color-desc"},{default:u((()=>[i(" Balance ")])),_:1}),x(h,{name:"/static/icon/coin_bit.png",size:"30rpx"}),x(o,{class:"m-x-3 text-sm color-desc"},{default:u((()=>[i(f(("assetBalanceFormat"in t?t.assetBalanceFormat:m(l))(m(D),m(a).GOLD)),1)])),_:1})])),_:1}),x(g,{class:"w-full flex-center"},{default:u((()=>[x(G,{type:"primary",round:!1,block:"","custom-class":"rounded-3 flex-1 h-76rpx",onClick:S},{default:u((()=>[x(g,{class:"w-full flex-center"},{default:u((()=>[x(g,{class:"flex-y-center"},{default:u((()=>[x(B,{src:"/static/icons/gold.png","custom-class":"h-25rpx w-25rpx"}),x(o,{class:"m-x-1 text-md color-white"},{default:u((()=>[i(f(("balanceFormat"in t?t.balanceFormat:m(e))(m(Q).next.cost.golds)),1)])),_:1})])),_:1}),m(Q).next.cost.diamonds>0?(n(),d(g,{key:0,class:"flex-y-center"},{default:u((()=>[x(B,{src:"/static/icons/diamond.png","custom-class":"h-25rpx w-25rpx"}),x(o,{class:"ml-1 text-md color-white"},{default:u((()=>[i(" + "+f(("balanceFormat"in t?t.balanceFormat:m(e))(m(Q).next.cost.diamonds)),1)])),_:1})])),_:1})):y("",!0),x(o,{class:"ml-1 text-md color-white"},{default:u((()=>[i(" Upgrade ")])),_:1})])),_:1})])),_:1})])),_:1}),x(g,{class:"flex-col p-32rpx"},{default:u((()=>[x(g,{class:"flex-y-center"},{default:u((()=>[x(o,{class:"text-md color-white"},{default:u((()=>[i(" Current Mining Earnings Current Properties ")])),_:1})])),_:1}),x(g,{class:"mt-26rpx box-border flex-col rounded-3 bg-cell p-24rpx color-white"},{default:u((()=>[x(g,{class:"m-y-14rpx flex-y-center"},{default:u((()=>[x(g,{class:"mr-24rpx h-80rpx w-80rpx flex-center rounded-3 bg-cell-icon"},{default:u((()=>[x(T,{name:t.item.icon,size:"38rpx"},null,8,["name"])])),_:1}),x(g,{class:"flex-x-between flex-1"},{default:u((()=>[x(g,{class:"flex-1 flex-col"},{default:u((()=>[x(g,{class:"flex-x-between"},{default:u((()=>[x(g,{class:"flex-y-center"},{default:u((()=>[x(g,{class:"mr-16rpx text-md color-white"},{default:u((()=>[i(f(t.item.title),1)])),_:1})])),_:1})])),_:1}),x(g,{class:"mt-16rpx flex-y-center"},{default:u((()=>[x(R,{class:"richtext",nodes:t.item.note},null,8,["nodes"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}}});export{q as default};
