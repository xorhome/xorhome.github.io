import{b as e,A as l,i as t}from"./index.DRE4Ui8P.js";import{aU as a,d as s,W as r,N as c,r as o,G as n,Q as d,h as i,j as u,k as x,l as f,q as p,R as m,s as _,t as h,v,n as g,F as w,p as b,J as y,S as k,T as I,L as F,A as N,V as R,U as j,_ as G,X as C,C as D}from"./index-Cq9VOZ8T.js";import{_ as E}from"./wd-img.CYUre-6y.js";import{_ as U}from"./MyIcon.DtsftdS0.js";import{_ as A}from"./wd-segmented.ivc1WQY6.js";import{_ as L,a as S}from"./diamond.D93waEJc.js";import{h as z}from"./index.D350TKWz.js";import{u as T}from"./account.G0aekY3X.js";import{u as P}from"./paginate.DgF5CfMz.js";import"./index.DMLUgklw.js";class K{static getInvitationInfo(){return a({url:"invitation/info",method:"get"})}static getFriendsList(e){return a({url:"invitation/friends",method:"get",data:e})}static getRanking(e){return a({url:"invitation/ranking",method:"get",data:{limit:e}})}}var M=(e=>(e.GUIDE="Guide",e.FRIENDS="My Friends",e.RANKING="Ranking",e))(M||{});function V(e){return navigator.clipboard?navigator.clipboard.writeText(e):function(e){const l=document.createElement("textarea");return l.value=e,document.body.appendChild(l),l.select(),document.execCommand("copy"),document.body.removeChild(l),Promise.resolve()}(e)}const q=D(s({__name:"index",setup(a){const{getUserInfo:s}=T(),D=r(),q=c(),O=o([{value:M.GUIDE},{value:M.FRIENDS},{value:M.RANKING}]),J=o("Guide"),Q=o([]),W=o([]),X=o([]),Y=o([]),B=o(),H=n((()=>{const e=Q.value.find((e=>e.symbol===l.GOLD));return e?e.amount:0})),Z=n((()=>{const e=Q.value.find((e=>e.symbol===l.DIAMOND));return e?e.amount:0}));function $(){switch(J.value){case M.GUIDE:k(),K.getInvitationInfo().then((e=>{const{total_rewards:l,rules:t}=e||{};Q.value=l||{};const a=t||[];W.value=a,te("nomore")})).finally(I);break;case M.FRIENDS:k(),ee(((e,l)=>K.getFriendsList({page:e,limit:l}))).then((e=>{X.value.push(...e||[])})).finally(I);break;case M.RANKING:k(),K.getRanking(10).then((e=>{Y.value=e||[],te("nomore")})).finally(I)}}s().then((e=>{B.value=e})),$();const{paginate:ee,resetPaginate:le,setLoadStatus:te,totalCount:ae}=P($,se);function se(){X.value=[],W.value=[],Y.value=[],le(),$()}function re(){se()}function ce(){var e;try{z((null==(e=B.value)?void 0:e.invitation_url)||"")}catch(l){console.log(l),D.error("Please share in mini program")}}function oe(){var e;console.log("copying"),V((null==(e=B.value)?void 0:e.invitation_url)||"").then((()=>{D.success("Link copy success")}))}return(l,a)=>{const s=F,r=A,c=N,o=R,n=C,k=U,I=j,D=G,z=E,T=d("layout-tabbar-uni");return i(),u(T,null,{default:x((()=>[f(c,{class:"pb-200rpx"},{default:x((()=>[f(c,{class:"px pt-20rpx"},{default:x((()=>[f(r,{value:p(J),"onUpdate:value":a[0]||(a[0]=e=>m(J)?J.value=e:null),options:p(O),"custom-style":"background-color: #293146;",onChange:re},{label:x((({option:e})=>[f(s,{class:_(["color-desc",{"color-white":p(J)===e.value}])},{default:x((()=>[h(v(e.value),1)])),_:2},1032,["class"])])),_:1},8,["value","options"])])),_:1}),p(J)===p(M).GUIDE?(i(),g(w,{key:0},[f(c,{class:"flex-col p-32rpx"},{default:x((()=>[f(s,{class:"text-md color-desc"},{default:x((()=>[h(" Total Rewards ")])),_:1}),f(c,{class:"flex-center pt-40rpx"},{default:x((()=>[f(o,{src:L,mode:"scaleToFill",class:"mr-16rpx h-48rpx w-48rpx"}),f(s,{class:"text-title text-white"},{default:x((()=>[h(v(("balanceFormat"in l?l.balanceFormat:p(e))(p(H))),1)])),_:1}),f(o,{src:S,mode:"scaleToFill",class:"ml-36rpx mr-16rpx h-48rpx w-48rpx"}),f(s,{class:"text-title text-white"},{default:x((()=>[h(v(("balanceFormat"in l?l.balanceFormat:p(e))(p(Z))),1)])),_:1})])),_:1})])),_:1}),(i(!0),g(w,null,b(p(W),((e,a)=>(i(),u(c,{key:a,class:"flex-col p-32rpx"},{default:x((()=>[f(c,{class:"flex-y-center text-md color-desc"},{default:x((()=>[f(n,{class:"richtext",nodes:e.title},null,8,["nodes"]),e.button?(i(),u(k,{key:0,name:e.button.icon,size:"50rpx","custom-class":"bg-white rounded-50% ml-54rpx",onClick:l=>{return t=e.button,console.log(t),void q.push({name:"accountUpgrade"});var t}},null,8,["name","onClick"])):y("",!0)])),_:2},1024),(i(!0),g(w,null,b(e.items,((e,a)=>(i(),u(c,{key:a,class:"mt-26rpx box-border flex-col rounded-3 bg-cell p-24rpx color-white"},{default:x((()=>[("isArray"in l?l.isArray:p(t))(e)?(i(),u(c,{key:1},{default:x((()=>[(i(!0),g(w,null,b(e,((e,l)=>(i(),u(c,{key:l,class:"box-border flex-col rounded-3 bg-cell color-white"},{default:x((()=>[f(c,{class:"flex-y-center"},{default:x((()=>[f(c,{class:"mr-24rpx h-80rpx w-80rpx flex-center"},{default:x((()=>[f(k,{name:e.icon,size:"48rpx"},null,8,["name"])])),_:2},1024),f(c,{class:"text-lg color-white"},{default:x((()=>[f(n,{class:"richtext",nodes:e.title},null,8,["nodes"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)):(i(),u(c,{key:0,class:"m-y-14rpx flex-y-center"},{default:x((()=>[f(c,{class:"mr-24rpx h-80rpx w-80rpx flex-center rounded-3 bg-cell-icon"},{default:x((()=>[f(k,{name:e.icon,size:"38rpx"},null,8,["name"])])),_:2},1024),f(c,{class:"flex-x-between flex-1"},{default:x((()=>[f(c,{class:"flex-1 flex-col"},{default:x((()=>[f(c,{class:"flex-x-between"},{default:x((()=>[f(c,{class:"flex-y-center"},{default:x((()=>[f(c,{class:"mr-16rpx text-md color-white"},{default:x((()=>[h(v(e.title),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),f(c,{class:"mt-16rpx flex-y-center"},{default:x((()=>[f(n,{class:"richtext",nodes:e.note},null,8,["nodes"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024))])),_:2},1024)))),128))])),_:2},1024)))),128)),f(c,{class:"pos-fixed pos-bottom-204rpx z1 box-border w-full flex-y-center px"},{default:x((()=>[f(I,{"custom-style":"height: 90rpx; border-radius: 28rpx; flex: 1;",onClick:ce},{default:x((()=>[f(c,{class:"flex-center"},{default:x((()=>[f(o,{src:"/static/icon/invite_white.png",mode:"aspectFit",class:"mr-26rpx h-32rpx w-42rpx"}),f(s,{class:"color-white"},{default:x((()=>[h(" Invite Friends ")])),_:1})])),_:1})])),_:1}),f(I,{"custom-style":"height: 90rpx; border-radius: 28rpx; min-width: 100rpx; margin-left: 20rpx;",onClick:oe},{default:x((()=>[f(c,{class:"w-full flex-center"},{default:x((()=>[f(o,{src:"/static/icon/copy_white.png",mode:"aspectFit",class:"h-50rpx w-42rpx"})])),_:1})])),_:1})])),_:1})],64)):p(J)===p(M).FRIENDS?(i(),u(c,{key:1,class:"flex-col p-32rpx"},{default:x((()=>[f(c,{class:"flex-x-between"},{default:x((()=>[f(c,{class:"flex-y-center"},{default:x((()=>[f(s,{class:"text-md color-desc"},{default:x((()=>[h(" Your Friends( ")])),_:1}),f(s,{class:"text-md color-gold"},{default:x((()=>[h(v(p(ae)||0),1)])),_:1}),f(s,{class:"text-md color-desc"},{default:x((()=>[h(" ) ")])),_:1})])),_:1}),f(D,{name:"/static/icon/refresh.png",size:"40rpx",onClick:se})])),_:1}),f(c,{class:"flex-x-between pt-32rpx"},{default:x((()=>[f(s,{class:"text-md color-desc"},{default:x((()=>[h(" Nickname & VIP Level ")])),_:1}),f(s,{class:"text-md color-desc"},{default:x((()=>[h(" Sign-Up Time ")])),_:1})])),_:1}),f(c,null,{default:x((()=>[(i(!0),g(w,null,b(p(X),((e,l)=>(i(),u(c,{key:l,class:"mt-26rpx box-border flex-col rounded-3 bg-cell p-24rpx color-white"},{default:x((()=>[f(c,{class:"m-y-14rpx flex-y-center"},{default:x((()=>[f(c,{class:"mr-24rpx flex-center"},{default:x((()=>[f(z,{width:"70rpx",height:"70rpx",round:"",src:e.avatar},null,8,["src"])])),_:2},1024),f(c,{class:"flex-x-between flex-1"},{default:x((()=>[f(c,{class:"flex-1"},{default:x((()=>[f(s,{class:"mr-12rpx text-md color-white"},{default:x((()=>[h(v(e.nickname),1)])),_:2},1024),(null==e?void 0:e.vip)?(i(),u(s,{key:0,class:"text-md color-gold"},{default:x((()=>[h(" [VIP"+v((null==e?void 0:e.vip)||0)+"] ",1)])),_:2},1024)):y("",!0)])),_:2},1024),f(s,{class:"text-md color-desc"},{default:x((()=>[h(v(e.register_time),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):p(J)===p(M).RANKING?(i(),u(c,{key:2,class:"box-border w-100vw px pt-36rpx"},{default:x((()=>[f(c,{class:"flex-y-center"},{default:x((()=>[f(c,{class:"w-15% flex-center"},{default:x((()=>[f(s,{class:"text-md color-desc"},{default:x((()=>[h(" Rank ")])),_:1})])),_:1}),f(c,{class:"w-35% flex-center"},{default:x((()=>[f(s,{class:"text-md color-desc"},{default:x((()=>[h(" Nickname ")])),_:1})])),_:1}),f(c,{class:"w-20% flex-center"},{default:x((()=>[f(s,{class:"text-md color-desc"},{default:x((()=>[h(" Refs ")])),_:1})])),_:1}),f(c,{class:"w-30% flex-center"},{default:x((()=>[f(s,{class:"text-md color-desc"},{default:x((()=>[h(" Ref Earnings ")])),_:1})])),_:1})])),_:1}),f(c,null,{default:x((()=>[(i(!0),g(w,null,b(p(Y),((t,a)=>(i(),u(c,{key:a,class:"mt-26rpx box-border flex-col rounded-3 bg-cell p-24rpx color-white"},{default:x((()=>[f(c,{class:"m-y-14rpx flex-y-center"},{default:x((()=>[f(c,{class:"w-15% flex-center flex-wrap"},{default:x((()=>[f(s,{class:"text-md color-white"},{default:x((()=>[h(v(a+1),1)])),_:2},1024)])),_:2},1024),f(c,{class:"w-35% flex-y-center flex-wrap"},{default:x((()=>[f(z,{width:"70rpx",height:"70rpx",round:"",src:t.avatar||"/static/icon/avatar_default.png"},null,8,["src"]),f(s,{class:"ml-26rpx text-md color-white"},{default:x((()=>[h(v(t.nickname),1)])),_:2},1024)])),_:2},1024),f(c,{class:"w-20% flex-center flex-wrap"},{default:x((()=>[f(s,{class:"text-md color-white"},{default:x((()=>[h(v(t.invitation_count||0),1)])),_:2},1024)])),_:2},1024),f(c,{class:"w-30% flex-center flex-wrap"},{default:x((()=>[f(D,{name:"/static/icons/gold.png",size:"32rpx"}),f(s,{class:"ml-2 text-md color-gold"},{default:x((()=>[h(" +"+v(("balanceFormat"in l?l.balanceFormat:p(e))(t.invitation_reward_golds,"0.00a")),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):y("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-700a2bd8"]]);export{q as default};
