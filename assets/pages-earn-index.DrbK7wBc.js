import{a as e,A as l,f as a,b as t}from"./index.DRE4Ui8P.js";import{aO as s,r,aP as o,d as c,N as n,G as u,aQ as d,aR as i,Q as f,h as x,j as m,k as p,l as _,t as w,v as y,q as h,R as v,s as b,J as g,n as k,p as C,F as E,S as A,T as L,V as F,L as P,A as O,aS as N,U as z,aT as j,I,_ as T,C as D}from"./index-Cq9VOZ8T.js";import{_ as M}from"./MyIcon.DtsftdS0.js";import{_ as S}from"./wd-segmented.ivc1WQY6.js";import{_ as U,a as B}from"./diamond.D93waEJc.js";import{E as R}from"./index.DoFJOdeK.js";import{u as G}from"./account.G0aekY3X.js";import{m as H,P as V}from"./index.D350TKWz.js";import"./index.DMLUgklw.js";var $=(e=>(e.ALL="All",e.OFFICAL="Offical",e.PARTNERS="Partners",e.GIFTS="Gifts",e))($||{}),q=(e=>(e[e.UNCONFIRM=0]="UNCONFIRM",e[e.ENABLE=1]="ENABLE",e[e.COMPLETED=2]="COMPLETED",e[e.CANCEL=-1]="CANCEL",e))(q||{});const J=s("app",(()=>{const e=r(),l=r(),a=()=>new Promise(((l,a)=>{e.value?l(e.value):o.init().then((a=>{e.value=a,l(a)})).catch(a)}));return{socials:l,systemConfig:e,getSocials:()=>new Promise(((e,t)=>{l.value?e(l.value):a().then((a=>{l.value=a.socials,e(l.value)})).catch(t)})),getSystemConfig:a}})),Q=D(c({__name:"index",setup(s){const o=n(),{getSocials:c}=J(),{getUserAssets:D,getUserInfo:Q}=G(),K=r([]),W=r([]),X=r($.ALL),Y=r({}),Z=r(),ee=r({twitter:"",telegram:"",channel:"",discord:""}),le=u((()=>{const e=K.value.find((e=>e.name===X.value));return e?e.id:0})),ae=r([]),te=r(),se=r(!1),re=r(!1),oe=r();function ce(e){let l;return l=e.category&&""!==e.category?K.value.find((l=>l.category===e.category)):K.value.find((l=>l.kind===e.kind)),l?l.name:""}function ne(){return new Promise(((e,l)=>{R.taskCatalogs().then((l=>{const a=l||[];K.value=a,a.forEach((e=>{W.value.push({value:e.name,payload:e.id})})),e(W.value)})).catch(l)}))}function ue(){R.taskPendingCount(le.value).then((e=>{Y.value=e||{}}))}function de(){A();const e=new Promise(((e,l)=>{R.taskList(le.value).then((l=>{const a=l||[];a.forEach((e=>{"string"==typeof e.rewards&&(e.rewards=JSON.parse(e.rewards))})),ae.value=a,e(a)})).catch(l)}));Promise.all([e]).finally(L)}function ie(){D([l.GOLD,l.DIAMOND]).then((e=>{Z.value=e}))}function fe(e){te.value=e,R.taskComplete({id:e.id}).then((()=>{e.completed=1,1===e.cyclical&&(e.countdown=e.cycle_interval),se.value=!0}))}function xe(e){switch(console.log("task click:",e),e.type){case"telegram":case"channel":case"group":case"twitter":case"discord":te.value=e,re.value=!0;break;case"adsgram":if(window.Adsgram){A();window.Adsgram.init({blockId:e.target}).show().then((l=>{l.done&&!e.completed&&fe(e)})).catch((e=>{console.log("Adsgram show fail:",e)})).finally(L)}break;case"vip":o.push({name:"accountUpgrade"})}}function me(){if(te.value)switch(te.value.type){case"telegram":case"channel":case"group":V(te.value.target);break;case"twitter":case"discord":H(te.value.target)}}function pe(){te.value&&fe(te.value)}return d((()=>{ie(),ue(),ne().then(de)})),i((()=>{Q().then((e=>{oe.value=e})),c().then((e=>{ee.value=e})),ie(),ue(),ne().then(de)})),(s,r)=>{const o=F,c=P,n=O,u=N,d=S,i=M,A=T,L=z,D=j,R=I,G=f("layout-tabbar-uni");return x(),m(G,null,{default:p((()=>[_(n,null,{default:p((()=>[_(n,{class:"flex-center pt-50rpx"},{default:p((()=>[_(o,{src:U,mode:"scaleToFill",class:"mr-16rpx h-48rpx w-48rpx"}),_(c,{class:"text-title text-white"},{default:p((()=>[w(y(("assetBalanceFormat"in s?s.assetBalanceFormat:h(e))(h(Z),h(l).GOLD)),1)])),_:1}),_(o,{src:B,mode:"scaleToFill",class:"ml-36rpx mr-16rpx h-48rpx w-48rpx"}),_(c,{class:"text-title text-white"},{default:p((()=>[w(y(("assetBalanceFormat"in s?s.assetBalanceFormat:h(e))(h(Z),h(l).DIAMOND)),1)])),_:1})])),_:1}),h(W).length>0?(x(),m(n,{key:0,class:"mt-40rpx px"},{default:p((()=>[_(d,{value:h(X),"onUpdate:value":r[0]||(r[0]=e=>v(X)?X.value=e:null),options:h(W),"custom-style":"background:unset;",onChange:de},{label:p((({option:e})=>[_(u,{"model-value":h(Y)[e.payload]||0,"custom-class":"w-full"},{default:p((()=>[_(c,{class:b(["color-desc",{"color-black":h(X)===e.value}])},{default:p((()=>[w(y(e.value),1)])),_:2},1032,["class"])])),_:2},1032,["model-value"])])),_:1},8,["value","options"])])),_:1})):g("",!0),0===h(le)?(x(!0),k(E,{key:1},C(h(ae),((e,l)=>(x(),m(n,{key:l,class:"flex-col p-32rpx"},{default:p((()=>[_(n,{class:"flex-x-between"},{default:p((()=>[_(c,{class:"text-md color-white"},{default:p((()=>[w(y(ce(e)),1)])),_:2},1024)])),_:2},1024),(x(!0),k(E,null,C(e.items,((e,l)=>(x(),m(n,{key:l,class:"mt-26rpx box-border flex-col rounded-3 bg-cell p-24rpx color-white",onClick:l=>xe(e)},{default:p((()=>[_(n,{class:"m-y-14rpx flex-y-center"},{default:p((()=>[_(n,{class:"mr-24rpx h-76rpx w-76rpx flex-center rounded-3 bg-cell-icon"},{default:p((()=>[_(i,{name:e.icon,size:"76rpx"},null,8,["name"])])),_:2},1024),_(n,{class:"flex-x-between flex-1"},{default:p((()=>[_(n,{class:"flex-1 flex-col"},{default:p((()=>[_(n,{class:"flex-x-between"},{default:p((()=>[_(n,{class:"flex-y-center"},{default:p((()=>[_(c,{class:"mr-16rpx text-md color-desc"},{default:p((()=>[w(y(e.title),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),e.rewards&&e.rewards.length>0?(x(),m(n,{key:0,class:"mt-16rpx flex-y-center flex-wrap"},{default:p((()=>[(x(!0),k(E,null,C(e.rewards,((e,l)=>(x(),m(n,{key:l,class:"mr-2 flex-y-center"},{default:p((()=>[_(A,{name:`/static/earn/icon_${e.symbol}.png`,size:"30rpx"},null,8,["name"]),_(c,{class:"ml-16rpx text-md color-white"},{default:p((()=>[w(y(e.amount),1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)):g("",!0)])),_:2},1024),_(n,{class:"flex-y-center"},{default:p((()=>[e.user_daily_limit_count>0?(x(),m(c,{key:0,class:"text-md color-white"},{default:p((()=>[w(y(e.user_daily_completed_count)+"/"+y(e.user_daily_limit_count),1)])),_:2},1024)):g("",!0),e.countdown>0?(x(),m(c,{key:1,class:"pl-12rpx text-md color-white"},{default:p((()=>[w(y(("formatHour"in s?s.formatHour:h(a))(e.countdown)),1)])),_:2},1024)):g("",!0),e.user_daily_limit_count<=0&&e.countdown<=0?(x(),k(E,{key:2},[e.status!==h(q).COMPLETED?(x(),m(A,{key:0,name:"arrow-right",size:"44rpx",color:"#aaaaaa"})):(x(),m(A,{key:1,name:"check",size:"44rpx",color:"#ffffff"}))],64)):g("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)))),128)):(x(),m(n,{key:2,class:"flex-col p-32rpx"},{default:p((()=>[_(n,{class:"flex-x-between"},{default:p((()=>[_(c,{class:"text-md color-white"},{default:p((()=>[w(y(h(X)),1)])),_:1})])),_:1}),(x(!0),k(E,null,C(h(ae),((e,l)=>(x(),m(n,{key:l,class:"mt-26rpx box-border flex-col rounded-3 bg-cell p-24rpx color-white",onClick:l=>xe(e)},{default:p((()=>[_(n,{class:"m-y-14rpx flex-y-center"},{default:p((()=>[_(n,{class:"mr-24rpx h-76rpx w-76rpx flex-center rounded-3 bg-cell-icon"},{default:p((()=>[_(i,{name:e.icon,size:"76rpx","custom-class":"flex-center"},null,8,["name"])])),_:2},1024),_(n,{class:"flex-x-between flex-1"},{default:p((()=>[_(n,{class:"flex-1 flex-col"},{default:p((()=>[_(n,{class:"flex-x-between"},{default:p((()=>[_(n,{class:"flex-y-center"},{default:p((()=>[_(c,{class:"mr-16rpx text-md color-desc"},{default:p((()=>[w(y(e.title),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),e.rewards&&e.rewards.length>0?(x(),m(n,{key:0,class:"mt-16rpx flex-y-center flex-wrap"},{default:p((()=>[(x(!0),k(E,null,C(e.rewards,((e,l)=>(x(),m(n,{key:l,class:"mr-2 flex-y-center"},{default:p((()=>[_(A,{name:`/static/earn/icon_${e.symbol}.png`,size:"30rpx"},null,8,["name"]),_(c,{class:"ml-16rpx text-md color-white"},{default:p((()=>[w(y(e.amount),1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)):g("",!0)])),_:2},1024),_(n,{class:"flex-y-center"},{default:p((()=>[e.user_daily_limit_count>0?(x(),m(c,{key:0,class:"text-md color-white"},{default:p((()=>[w(y(e.user_daily_completed_count)+"/"+y(e.user_daily_limit_count),1)])),_:2},1024)):g("",!0),e.countdown>0?(x(),m(c,{key:1,class:"pl-12rpx text-md color-white"},{default:p((()=>[w(y(("formatHour"in s?s.formatHour:h(a))(e.countdown)),1)])),_:2},1024)):g("",!0),e.user_daily_limit_count<=0&&e.countdown<=0?(x(),k(E,{key:2},[e.status!==h(q).COMPLETED?(x(),m(A,{key:0,name:"arrow-right",size:"44rpx",color:"#aaaaaa"})):(x(),m(A,{key:1,name:"check",size:"44rpx",color:"#ffffff"}))],64)):g("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})),_(D,{show:h(se),onClick:r[2]||(r[2]=e=>se.value=!1)},{default:p((()=>[_(n,{class:"h-full flex-center"},{default:p((()=>[_(n,{class:"flex-center flex-col"},{default:p((()=>[_(c,{class:"text-lg color-white"},{default:p((()=>[w(" Congratulations on earning ")])),_:1}),_(n,{class:"custom-reward-bg my-50rpx box-border flex-center flex-col px-150rpx py-160rpx pb-120rpx"},{default:p((()=>{var e;return[(x(!0),k(E,null,C(null==(e=h(te))?void 0:e.rewards,((e,l)=>(x(),m(n,{key:l,class:"mb-40rpx flex-y-center"},{default:p((()=>[_(i,{name:e.icon,size:"45rpx"},null,8,["name"]),_(c,{class:"pl-18rpx text-title color-white"},{default:p((()=>[w(y(("balanceFormat"in s?s.balanceFormat:h(t))(e.amount)),1)])),_:2},1024),_(c,{class:"pl-18rpx text-title color-white"},{default:p((()=>[w(y(e.name||e.symbol),1)])),_:2},1024)])),_:2},1024)))),128))]})),_:1}),_(n,{class:"box-border w-full flex-center px-130rpx"},{default:p((()=>[_(L,{type:"primary",round:!1,block:"","custom-class":"rounded-3 flex-1 h-76rpx w-full",onClick:r[1]||(r[1]=e=>se.value=!1)},{default:p((()=>[_(c,{class:"text-lg color-white"},{default:p((()=>[w(" ACCEPT ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["show"]),_(R,{modelValue:h(re),"onUpdate:modelValue":r[3]||(r[3]=e=>v(re)?re.value=e:null),position:"bottom","z-index":9999,"custom-style":"background: unset;",closable:"","safe-area-inset-bottom":"",onClose:r[4]||(r[4]=e=>re.value=!1)},{default:p((()=>[_(n,{class:"mx-20rpx box-border flex-center flex-col rounded-t-3 bg-popup pt-88rpx"},{default:p((()=>{var e;return[_(i,{name:`${null==(e=h(te))?void 0:e.icon}`,size:"180rpx","custom-class":"rounded-3"},null,8,["name"]),_(c,{class:"pb-60rpx pt-48rpx text-md color-white"},{default:p((()=>{var e;return[w(y(null==(e=h(te))?void 0:e.title),1)]})),_:1}),_(n,{class:"flex-center"},{default:p((()=>[_(L,{type:"primary",round:!1,block:"","custom-class":"rounded-3 flex-1 h-76rpx w-full",onClick:me},{default:p((()=>[_(c,{class:"text-lg color-white"},{default:p((()=>[w(" Subscribe ")])),_:1})])),_:1})])),_:1}),_(n,{class:"mt-60rpx flex-center flex-wrap"},{default:p((()=>{var e;return[(x(!0),k(E,null,C(null==(e=h(te))?void 0:e.rewards,((e,l)=>(x(),m(n,{key:l,class:"flex-y-center"},{default:p((()=>[_(i,{name:e.icon,size:"45rpx"},null,8,["name"]),_(c,{class:"pl-18rpx text-title color-white"},{default:p((()=>[w(y(("balanceFormat"in s?s.balanceFormat:h(t))(e.amount)),1)])),_:2},1024)])),_:2},1024)))),128))]})),_:1}),_(n,{class:"mb-48rpx mt-60rpx box-border w-full flex-center px-36rpx"},{default:p((()=>[_(L,{type:"primary",disabled:"",round:!1,block:"","custom-class":"rounded-3 flex-1 h-90rpx w-full","custom-style":"background: #8a8a8a",onClick:pe},{default:p((()=>[_(c,{class:"text-lg color-white"},{default:p((()=>[w(" Check ")])),_:1})])),_:1})])),_:1})]})),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-e6d02feb"]]);export{Q as default};
