var e=Object.defineProperty,t=(t,l,s)=>(((t,l,s)=>{l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[l]=s})(t,"symbol"!=typeof l?l+"":l,s),s);import{a as l,A as s,d as o,b as r}from"./index.DRE4Ui8P.js";import{b as n,m as a,a as i,c,d as u,i as d,r as f,u as p,e as h,w as m,o as x,g,f as v,h as _,j as b,k as y,l as w,n as k,F as C,p as E,q as N,s as M,t as O,v as S,x as A,y as I,z as F,A as B,_ as z,B as T,C as P,D,E as U,G as V,H as R,I as L,J as $,K as j,L as G,M as K,N as H,O as q,P as Q,Q as W,R as Y,S as X,T as J,U as Z,V as ee}from"./index-Cq9VOZ8T.js";import{_ as te}from"./wd-img.CYUre-6y.js";import{_ as le}from"./MyIcon.DtsftdS0.js";import{_ as se}from"./wd-progress.2YTR8Eqz.js";import{_ as oe,a as re}from"./diamond.D93waEJc.js";import{M as ne}from"./index.CKr23U1R.js";import{u as ae}from"./ton.F8kisyBJ.js";import{u as ie}from"./account.G0aekY3X.js";import{t as ce}from"./throttle.P4z1NBKD.js";import"./index.DMLUgklw.js";let ue=[];const de="__QUEUE_KEY__",fe=Symbol("wd-drop-menu"),pe=P(u({name:"wd-drop-menu",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...n,zIndex:a(12),direction:i("down"),modal:c(!0),closeOnClickModal:c(!0),duration:a(200)},setup(e){const t=e,l=d(de,null),s=f(`dropMenuId${p()}`),o=f(0),r=f(0),{proxy:n}=T(),{linkChildren:a,children:i}=h(fe);function c(e){e.preventDefault(),e.stopPropagation()}function u(e){const{title:t,modelValue:l,options:s,valueKey:o,labelKey:r}=e;if(t)return t;for(let n=0,a=s.length;n<a;n++)if(l===s[n][o])return s[n][r];console.error("[wot-design] warning(wd-drop-menu-item): no value is matched in the options option.")}function P(e){var t;e&&!e.disabled&&(l&&l.closeOther?l.closeOther(e):(t=e,ue.forEach((e=>{e.$.uid!==t.$.uid&&e.$.exposed.close()}))),D(e))}function D(e){v(`#${s.value}`,!1,n).then((l=>{if(!l)return;const{top:s,bottom:n}=l;"down"===t.direction?o.value=Number(n):o.value=r.value-Number(s),e.$.exposed.toggle()}))}return a({props:t,fold:D,offset:o}),m((()=>t.direction),(e=>{["up","down"].includes(e)||console.error("[wot design] warning(wd-drop-menu): direction must be 'up' or 'down'")}),{deep:!0,immediate:!0}),x((()=>{r.value=g().windowHeight})),(e,t)=>{const l=B,o=z;return _(),b(l,{style:I(e.customStyle),class:M(`wd-drop-menu ${e.customClass}`),onClick:F(c,["stop"]),id:s.value},{default:y((()=>[w(l,{class:"wd-drop-menu__list"},{default:y((()=>[(_(!0),k(C,null,E(N(i),((e,t)=>(_(),b(l,{key:t,onClick:t=>P(e),class:M(`wd-drop-menu__item ${e.disabled?"is-disabled":""} ${e.$.exposed.getShowPop()?"is-active":""}`)},{default:y((()=>[w(l,{class:"wd-drop-menu__item-title"},{default:y((()=>[w(l,{class:"wd-drop-menu__item-title-text"},{default:y((()=>[O(S(u(e)),1)])),_:2},1024),w(o,{name:e.icon,size:e.iconSize,"custom-class":"wd-drop-menu__arrow"},null,8,["name","size"])])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])),_:1}),A(e.$slots,"default",{},void 0,!0)])),_:3},8,["style","class","id"])}}}),[["__scopeId","data-v-0eef0830"]]),he=P(u({name:"wd-drop-menu-item",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...n,customTitle:i(""),customIcon:i(""),modelValue:[String,Number],options:D(),disabled:c(!1),iconName:i("check"),title:String,icon:i("arrow-down"),iconSize:i("14px"),beforeToggle:Function,valueKey:i("value"),labelKey:i("label"),tipKey:i("tip"),customPopupClass:i(""),customPopupStyle:i("")},emits:["change","update:modelValue","open","opened","closed","close"],setup(e,{expose:t,emit:l}){const s=e,o=l,r=d(de,null),n=f(!1),a=f(!1),i=f(),c=f(12),u=f(!0),p=f(!0),h=f(0),{parent:g}=U(fe),{proxy:v}=T(),N=V((()=>{let e="";return e=n.value&&g?"down"===g.props.direction?`top: calc(var(--window-top) + ${g.offset.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${g.offset.value}px)`:"",e}));function F(){a.value&&(j(s.beforeToggle)?s.beforeToggle({status:!1,resolve:e=>{e&&P()}}):P())}function P(){a.value&&(a.value=!1)}function D(){a.value||(j(s.beforeToggle)?s.beforeToggle({status:!0,resolve:e=>{e&&H()}}):H())}function H(){n.value=!0,a.value=!0,g&&(u.value=Boolean(g.props.modal),h.value=Number(g.props.duration),p.value=Boolean(g.props.closeOnClickModal),i.value="down"===g.props.direction?"top":"bottom"),o("open")}function q(){n.value=!1,o("closed")}function Q(){o("open")}function W(){o("opened")}function Y(){o("close")}return m((()=>s.modelValue),(e=>{K(e)&&"number"!=typeof e&&"string"!=typeof e&&console.error("[wot-design] warning(wd-drop-menu-item): the type of value should be a number or a string.")}),{deep:!0,immediate:!0}),x((()=>{var e;r&&r.pushToQueue?r.pushToQueue(v):(e=v,ue.push(e))})),R((()=>{var e;r&&r.removeFromQueue?r.removeFromQueue(v):(e=v,ue=ue.filter((t=>t.$.uid!==e.$.uid)))})),t({getShowPop:function(){return a.value},open:D,close:F,toggle:function(){a.value?F():D()}}),(e,t)=>{const l=G,r=B;return n.value?(_(),b(r,{key:0,class:M(`wd-drop-item  ${e.customClass}`),style:I(`z-index: ${c.value}; ${N.value};${e.customStyle}`)},{default:y((()=>[w(L,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),"z-index":c.value,duration:h.value,position:i.value,"custom-style":`position: absolute; max-height: 80%;${e.customPopupStyle}`,"custom-class":e.customPopupClass,"modal-style":"position: absolute;",modal:u.value,"close-on-click-modal":!1,onClickModal:t[1]||(t[1]=e=>p.value&&F()),onBeforeEnter:Q,onAfterEnter:W,onBeforeLeave:Y,onAfterLeave:q},{default:y((()=>[e.options.length?(_(),b(r,{key:0},{default:y((()=>[(_(!0),k(C,null,E(e.options,((t,n)=>(_(),b(r,{key:n,onClick:e=>function(e){if(s.disabled)return;const{valueKey:t}=s,l=s.options[e];o("update:modelValue",""!==l[t]&&void 0!==l[t]?l[t]:l),o("change",{value:""!==l[t]&&void 0!==l[t]?l[t]:l,selectedItem:l}),F()}(n),class:M("wd-drop-item__option "+((""!==t[e.valueKey]?t[e.valueKey]:t)===e.modelValue?"is-active":""))},{default:y((()=>[w(r,{class:M(`wd-drop-item__title ${e.customTitle}`)},{default:y((()=>[w(l,null,{default:y((()=>[O(S(t[e.labelKey]?t[e.labelKey]:t),1)])),_:2},1024),t[e.tipKey]?(_(),b(l,{key:0,class:"wd-drop-item__tip"},{default:y((()=>[O(S(t[e.tipKey]),1)])),_:2},1024)):$("",!0)])),_:2},1032,["class"]),(""!==t[e.valueKey]?t[e.valueKey]:t)===e.modelValue?(_(),b(z,{key:0,name:e.iconName,size:"20px",class:M(`wd-drop-item__icon ${e.customIcon}`)},null,8,["name","class"])):$("",!0)])),_:2},1032,["onClick","class"])))),128))])),_:1})):A(e.$slots,"default",{key:1},void 0,!0)])),_:3},8,["modelValue","z-index","duration","position","custom-style","custom-class","modal"])])),_:3},8,["class","style"])):$("",!0)}}}),[["__scopeId","data-v-7a651fe0"]]);var me=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,xe=Math.ceil,ge=Math.floor,ve="[BigNumber Error] ",_e=ve+"Number primitive has more than 15 significant digits: ",be=1e14,ye=14,we=9007199254740991,ke=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Ce=1e7,Ee=1e9;function Ne(e){var t=0|e;return e>0||e===t?t:t-1}function Me(e){for(var t,l,s=1,o=e.length,r=e[0]+"";s<o;){for(t=e[s++]+"",l=ye-t.length;l--;t="0"+t);r+=t}for(o=r.length;48===r.charCodeAt(--o););return r.slice(0,o+1||1)}function Oe(e,t){var l,s,o=e.c,r=t.c,n=e.s,a=t.s,i=e.e,c=t.e;if(!n||!a)return null;if(l=o&&!o[0],s=r&&!r[0],l||s)return l?s?0:-a:n;if(n!=a)return n;if(l=n<0,s=i==c,!o||!r)return s?0:!o^l?1:-1;if(!s)return i>c^l?1:-1;for(a=(i=o.length)<(c=r.length)?i:c,n=0;n<a;n++)if(o[n]!=r[n])return o[n]>r[n]^l?1:-1;return i==c?0:i>c^l?1:-1}function Se(e,t,l,s){if(e<t||e>l||e!==ge(e))throw Error(ve+(s||"Argument")+("number"==typeof e?e<t||e>l?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function Ae(e){var t=e.c.length-1;return Ne(e.e/ye)==t&&e.c[t]%2!=0}function Ie(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function Fe(e,t,l){var s,o;if(t<0){for(o=l+".";++t;o+=l);e=o+e}else if(++t>(s=e.length)){for(o=l,t-=s;--t;o+=l);e+=o}else t<s&&(e=e.slice(0,t)+"."+e.slice(t));return e}var Be=function e(t){var l,s,o,r,n,a=y.prototype={constructor:y,toString:null,valueOf:null},i=new y(1),c=20,u=4,d=-7,f=21,p=-1e7,h=1e7,m=!1,x=1,g=0,v={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},_="0123456789abcdefghijklmnopqrstuvwxyz",b=!0;function y(e,t){var l,r,n,a,i,d,f,m,x=this;if(!(x instanceof y))return new y(e,t);if(null==t){if(e&&!0===e._isBigNumber)return x.s=e.s,void(!e.c||e.e>h?x.c=x.e=null:e.e<p?x.c=[x.e=0]:(x.e=e.e,x.c=e.c.slice()));if((d="number"==typeof e)&&0*e==0){if(x.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,i=e;i>=10;i/=10,a++);return void(a>h?x.c=x.e=null:(x.e=a,x.c=[e]))}m=String(e)}else{if(!me.test(m=String(e)))return o(x,m,d);x.s=45==m.charCodeAt(0)?(m=m.slice(1),-1):1}(a=m.indexOf("."))>-1&&(m=m.replace(".","")),(i=m.search(/e/i))>0?(a<0&&(a=i),a+=+m.slice(i+1),m=m.substring(0,i)):a<0&&(a=m.length)}else{if(Se(t,2,_.length,"Base"),10==t&&b)return E(x=new y(e),c+x.e+1,u);if(m=String(e),d="number"==typeof e){if(0*e!=0)return o(x,m,d,t);if(x.s=1/e<0?(m=m.slice(1),-1):1,y.DEBUG&&m.replace(/^0\.0*|\./,"").length>15)throw Error(_e+e)}else x.s=45===m.charCodeAt(0)?(m=m.slice(1),-1):1;for(l=_.slice(0,t),a=i=0,f=m.length;i<f;i++)if(l.indexOf(r=m.charAt(i))<0){if("."==r){if(i>a){a=f;continue}}else if(!n&&(m==m.toUpperCase()&&(m=m.toLowerCase())||m==m.toLowerCase()&&(m=m.toUpperCase()))){n=!0,i=-1,a=0;continue}return o(x,String(e),d,t)}d=!1,(a=(m=s(m,t,10,x.s)).indexOf("."))>-1?m=m.replace(".",""):a=m.length}for(i=0;48===m.charCodeAt(i);i++);for(f=m.length;48===m.charCodeAt(--f););if(m=m.slice(i,++f)){if(f-=i,d&&y.DEBUG&&f>15&&(e>we||e!==ge(e)))throw Error(_e+x.s*e);if((a=a-i-1)>h)x.c=x.e=null;else if(a<p)x.c=[x.e=0];else{if(x.e=a,x.c=[],i=(a+1)%ye,a<0&&(i+=ye),i<f){for(i&&x.c.push(+m.slice(0,i)),f-=ye;i<f;)x.c.push(+m.slice(i,i+=ye));i=ye-(m=m.slice(i)).length}else i-=f;for(;i--;m+="0");x.c.push(+m)}}else x.c=[x.e=0]}function w(e,t,l,s){var o,r,n,a,i;if(null==l?l=u:Se(l,0,8),!e.c)return e.toString();if(o=e.c[0],n=e.e,null==t)i=Me(e.c),i=1==s||2==s&&(n<=d||n>=f)?Ie(i,n):Fe(i,n,"0");else if(r=(e=E(new y(e),t,l)).e,a=(i=Me(e.c)).length,1==s||2==s&&(t<=r||r<=d)){for(;a<t;i+="0",a++);i=Ie(i,r)}else if(t-=n,i=Fe(i,r,"0"),r+1>a){if(--t>0)for(i+=".";t--;i+="0");}else if((t+=r-a)>0)for(r+1==a&&(i+=".");t--;i+="0");return e.s<0&&o?"-"+i:i}function k(e,t){for(var l,s,o=1,r=new y(e[0]);o<e.length;o++)(!(s=new y(e[o])).s||(l=Oe(r,s))===t||0===l&&r.s===t)&&(r=s);return r}function C(e,t,l){for(var s=1,o=t.length;!t[--o];t.pop());for(o=t[0];o>=10;o/=10,s++);return(l=s+l*ye-1)>h?e.c=e.e=null:l<p?e.c=[e.e=0]:(e.e=l,e.c=t),e}function E(e,t,l,s){var o,r,n,a,i,c,u,d=e.c,f=ke;if(d){e:{for(o=1,a=d[0];a>=10;a/=10,o++);if((r=t-o)<0)r+=ye,n=t,i=d[c=0],u=ge(i/f[o-n-1]%10);else if((c=xe((r+1)/ye))>=d.length){if(!s)break e;for(;d.length<=c;d.push(0));i=u=0,o=1,n=(r%=ye)-ye+1}else{for(i=a=d[c],o=1;a>=10;a/=10,o++);u=(n=(r%=ye)-ye+o)<0?0:ge(i/f[o-n-1]%10)}if(s=s||t<0||null!=d[c+1]||(n<0?i:i%f[o-n-1]),s=l<4?(u||s)&&(0==l||l==(e.s<0?3:2)):u>5||5==u&&(4==l||s||6==l&&(r>0?n>0?i/f[o-n]:0:d[c-1])%10&1||l==(e.s<0?8:7)),t<1||!d[0])return d.length=0,s?(t-=e.e+1,d[0]=f[(ye-t%ye)%ye],e.e=-t||0):d[0]=e.e=0,e;if(0==r?(d.length=c,a=1,c--):(d.length=c+1,a=f[ye-r],d[c]=n>0?ge(i/f[o-n]%f[n])*a:0),s)for(;;){if(0==c){for(r=1,n=d[0];n>=10;n/=10,r++);for(n=d[0]+=a,a=1;n>=10;n/=10,a++);r!=a&&(e.e++,d[0]==be&&(d[0]=1));break}if(d[c]+=a,d[c]!=be)break;d[c--]=0,a=1}for(r=d.length;0===d[--r];d.pop());}e.e>h?e.c=e.e=null:e.e<p&&(e.c=[e.e=0])}return e}function N(e){var t,l=e.e;return null===l?e.toString():(t=Me(e.c),t=l<=d||l>=f?Ie(t,l):Fe(t,l,"0"),e.s<0?"-"+t:t)}return y.clone=e,y.ROUND_UP=0,y.ROUND_DOWN=1,y.ROUND_CEIL=2,y.ROUND_FLOOR=3,y.ROUND_HALF_UP=4,y.ROUND_HALF_DOWN=5,y.ROUND_HALF_EVEN=6,y.ROUND_HALF_CEIL=7,y.ROUND_HALF_FLOOR=8,y.EUCLID=9,y.config=y.set=function(e){var t,l;if(null!=e){if("object"!=typeof e)throw Error(ve+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(Se(l=e[t],0,Ee,t),c=l),e.hasOwnProperty(t="ROUNDING_MODE")&&(Se(l=e[t],0,8,t),u=l),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((l=e[t])&&l.pop?(Se(l[0],-Ee,0,t),Se(l[1],0,Ee,t),d=l[0],f=l[1]):(Se(l,-Ee,Ee,t),d=-(f=l<0?-l:l))),e.hasOwnProperty(t="RANGE"))if((l=e[t])&&l.pop)Se(l[0],-Ee,-1,t),Se(l[1],1,Ee,t),p=l[0],h=l[1];else{if(Se(l,-Ee,Ee,t),!l)throw Error(ve+t+" cannot be zero: "+l);p=-(h=l<0?-l:l)}if(e.hasOwnProperty(t="CRYPTO")){if((l=e[t])!==!!l)throw Error(ve+t+" not true or false: "+l);if(l){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw m=!l,Error(ve+"crypto unavailable");m=l}else m=l}if(e.hasOwnProperty(t="MODULO_MODE")&&(Se(l=e[t],0,9,t),x=l),e.hasOwnProperty(t="POW_PRECISION")&&(Se(l=e[t],0,Ee,t),g=l),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(l=e[t]))throw Error(ve+t+" not an object: "+l);v=l}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(l=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(l))throw Error(ve+t+" invalid: "+l);b="0123456789"==l.slice(0,10),_=l}}return{DECIMAL_PLACES:c,ROUNDING_MODE:u,EXPONENTIAL_AT:[d,f],RANGE:[p,h],CRYPTO:m,MODULO_MODE:x,POW_PRECISION:g,FORMAT:v,ALPHABET:_}},y.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!y.DEBUG)return!0;var t,l,s=e.c,o=e.e,r=e.s;e:if("[object Array]"=={}.toString.call(s)){if((1===r||-1===r)&&o>=-Ee&&o<=Ee&&o===ge(o)){if(0===s[0]){if(0===o&&1===s.length)return!0;break e}if((t=(o+1)%ye)<1&&(t+=ye),String(s[0]).length==t){for(t=0;t<s.length;t++)if((l=s[t])<0||l>=be||l!==ge(l))break e;if(0!==l)return!0}}}else if(null===s&&null===o&&(null===r||1===r||-1===r))return!0;throw Error(ve+"Invalid BigNumber: "+e)},y.maximum=y.max=function(){return k(arguments,-1)},y.minimum=y.min=function(){return k(arguments,1)},y.random=(r=9007199254740992,n=Math.random()*r&2097151?function(){return ge(Math.random()*r)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,l,s,o,r,a=0,u=[],d=new y(i);if(null==e?e=c:Se(e,0,Ee),o=xe(e/ye),m)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));a<o;)(r=131072*t[a]+(t[a+1]>>>11))>=9e15?(l=crypto.getRandomValues(new Uint32Array(2)),t[a]=l[0],t[a+1]=l[1]):(u.push(r%1e14),a+=2);a=o/2}else{if(!crypto.randomBytes)throw m=!1,Error(ve+"crypto unavailable");for(t=crypto.randomBytes(o*=7);a<o;)(r=281474976710656*(31&t[a])+1099511627776*t[a+1]+4294967296*t[a+2]+16777216*t[a+3]+(t[a+4]<<16)+(t[a+5]<<8)+t[a+6])>=9e15?crypto.randomBytes(7).copy(t,a):(u.push(r%1e14),a+=7);a=o/7}if(!m)for(;a<o;)(r=n())<9e15&&(u[a++]=r%1e14);for(o=u[--a],e%=ye,o&&e&&(r=ke[ye-e],u[a]=ge(o/r)*r);0===u[a];u.pop(),a--);if(a<0)u=[s=0];else{for(s=-1;0===u[0];u.splice(0,1),s-=ye);for(a=1,r=u[0];r>=10;r/=10,a++);a<ye&&(s-=ye-a)}return d.e=s,d.c=u,d}),y.sum=function(){for(var e=1,t=arguments,l=new y(t[0]);e<t.length;)l=l.plus(t[e++]);return l},s=function(){var e="0123456789";function t(e,t,l,s){for(var o,r,n=[0],a=0,i=e.length;a<i;){for(r=n.length;r--;n[r]*=t);for(n[0]+=s.indexOf(e.charAt(a++)),o=0;o<n.length;o++)n[o]>l-1&&(null==n[o+1]&&(n[o+1]=0),n[o+1]+=n[o]/l|0,n[o]%=l)}return n.reverse()}return function(s,o,r,n,a){var i,d,f,p,h,m,x,v,b=s.indexOf("."),w=c,k=u;for(b>=0&&(p=g,g=0,s=s.replace(".",""),m=(v=new y(o)).pow(s.length-b),g=p,v.c=t(Fe(Me(m.c),m.e,"0"),10,r,e),v.e=v.c.length),f=p=(x=t(s,o,r,a?(i=_,e):(i=e,_))).length;0==x[--p];x.pop());if(!x[0])return i.charAt(0);if(b<0?--f:(m.c=x,m.e=f,m.s=n,x=(m=l(m,v,w,k,r)).c,h=m.r,f=m.e),b=x[d=f+w+1],p=r/2,h=h||d<0||null!=x[d+1],h=k<4?(null!=b||h)&&(0==k||k==(m.s<0?3:2)):b>p||b==p&&(4==k||h||6==k&&1&x[d-1]||k==(m.s<0?8:7)),d<1||!x[0])s=h?Fe(i.charAt(1),-w,i.charAt(0)):i.charAt(0);else{if(x.length=d,h)for(--r;++x[--d]>r;)x[d]=0,d||(++f,x=[1].concat(x));for(p=x.length;!x[--p];);for(b=0,s="";b<=p;s+=i.charAt(x[b++]));s=Fe(s,f,i.charAt(0))}return s}}(),l=function(){function e(e,t,l){var s,o,r,n,a=0,i=e.length,c=t%Ce,u=t/Ce|0;for(e=e.slice();i--;)a=((o=c*(r=e[i]%Ce)+(s=u*r+(n=e[i]/Ce|0)*c)%Ce*Ce+a)/l|0)+(s/Ce|0)+u*n,e[i]=o%l;return a&&(e=[a].concat(e)),e}function t(e,t,l,s){var o,r;if(l!=s)r=l>s?1:-1;else for(o=r=0;o<l;o++)if(e[o]!=t[o]){r=e[o]>t[o]?1:-1;break}return r}function l(e,t,l,s){for(var o=0;l--;)e[l]-=o,o=e[l]<t[l]?1:0,e[l]=o*s+e[l]-t[l];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(s,o,r,n,a){var i,c,u,d,f,p,h,m,x,g,v,_,b,w,k,C,N,M=s.s==o.s?1:-1,O=s.c,S=o.c;if(!(O&&O[0]&&S&&S[0]))return new y(s.s&&o.s&&(O?!S||O[0]!=S[0]:S)?O&&0==O[0]||!S?0*M:M/0:NaN);for(x=(m=new y(M)).c=[],M=r+(c=s.e-o.e)+1,a||(a=be,c=Ne(s.e/ye)-Ne(o.e/ye),M=M/ye|0),u=0;S[u]==(O[u]||0);u++);if(S[u]>(O[u]||0)&&c--,M<0)x.push(1),d=!0;else{for(w=O.length,C=S.length,u=0,M+=2,(f=ge(a/(S[0]+1)))>1&&(S=e(S,f,a),O=e(O,f,a),C=S.length,w=O.length),b=C,v=(g=O.slice(0,C)).length;v<C;g[v++]=0);N=S.slice(),N=[0].concat(N),k=S[0],S[1]>=a/2&&k++;do{if(f=0,(i=t(S,g,C,v))<0){if(_=g[0],C!=v&&(_=_*a+(g[1]||0)),(f=ge(_/k))>1)for(f>=a&&(f=a-1),h=(p=e(S,f,a)).length,v=g.length;1==t(p,g,h,v);)f--,l(p,C<h?N:S,h,a),h=p.length,i=1;else 0==f&&(i=f=1),h=(p=S.slice()).length;if(h<v&&(p=[0].concat(p)),l(g,p,v,a),v=g.length,-1==i)for(;t(S,g,C,v)<1;)f++,l(g,C<v?N:S,v,a),v=g.length}else 0===i&&(f++,g=[0]);x[u++]=f,g[0]?g[v++]=O[b]||0:(g=[O[b]],v=1)}while((b++<w||null!=g[0])&&M--);d=null!=g[0],x[0]||x.splice(0,1)}if(a==be){for(u=1,M=x[0];M>=10;M/=10,u++);E(m,r+(m.e=u+c*ye-1)+1,n,d)}else m.e=c,m.r=+d;return m}}(),o=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,l=/^\.([^.]+)$/,s=/^-?(Infinity|NaN)$/,o=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(r,n,a,i){var c,u=a?n:n.replace(o,"");if(s.test(u))r.s=isNaN(u)?null:u<0?-1:1;else{if(!a&&(u=u.replace(e,(function(e,t,l){return c="x"==(l=l.toLowerCase())?16:"b"==l?2:8,i&&i!=c?e:t})),i&&(c=i,u=u.replace(t,"$1").replace(l,"0.$1")),n!=u))return new y(u,c);if(y.DEBUG)throw Error(ve+"Not a"+(i?" base "+i:"")+" number: "+n);r.s=null}r.c=r.e=null}}(),a.absoluteValue=a.abs=function(){var e=new y(this);return e.s<0&&(e.s=1),e},a.comparedTo=function(e,t){return Oe(this,new y(e,t))},a.decimalPlaces=a.dp=function(e,t){var l,s,o,r=this;if(null!=e)return Se(e,0,Ee),null==t?t=u:Se(t,0,8),E(new y(r),e+r.e+1,t);if(!(l=r.c))return null;if(s=((o=l.length-1)-Ne(this.e/ye))*ye,o=l[o])for(;o%10==0;o/=10,s--);return s<0&&(s=0),s},a.dividedBy=a.div=function(e,t){return l(this,new y(e,t),c,u)},a.dividedToIntegerBy=a.idiv=function(e,t){return l(this,new y(e,t),0,1)},a.exponentiatedBy=a.pow=function(e,t){var l,s,o,r,n,a,c,d,f=this;if((e=new y(e)).c&&!e.isInteger())throw Error(ve+"Exponent not an integer: "+N(e));if(null!=t&&(t=new y(t)),n=e.e>14,!f.c||!f.c[0]||1==f.c[0]&&!f.e&&1==f.c.length||!e.c||!e.c[0])return d=new y(Math.pow(+N(f),n?e.s*(2-Ae(e)):+N(e))),t?d.mod(t):d;if(a=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new y(NaN);(s=!a&&f.isInteger()&&t.isInteger())&&(f=f.mod(t))}else{if(e.e>9&&(f.e>0||f.e<-1||(0==f.e?f.c[0]>1||n&&f.c[1]>=24e7:f.c[0]<8e13||n&&f.c[0]<=9999975e7)))return r=f.s<0&&Ae(e)?-0:0,f.e>-1&&(r=1/r),new y(a?1/r:r);g&&(r=xe(g/ye+2))}for(n?(l=new y(.5),a&&(e.s=1),c=Ae(e)):c=(o=Math.abs(+N(e)))%2,d=new y(i);;){if(c){if(!(d=d.times(f)).c)break;r?d.c.length>r&&(d.c.length=r):s&&(d=d.mod(t))}if(o){if(0===(o=ge(o/2)))break;c=o%2}else if(E(e=e.times(l),e.e+1,1),e.e>14)c=Ae(e);else{if(0===(o=+N(e)))break;c=o%2}f=f.times(f),r?f.c&&f.c.length>r&&(f.c.length=r):s&&(f=f.mod(t))}return s?d:(a&&(d=i.div(d)),t?d.mod(t):r?E(d,g,u,undefined):d)},a.integerValue=function(e){var t=new y(this);return null==e?e=u:Se(e,0,8),E(t,t.e+1,e)},a.isEqualTo=a.eq=function(e,t){return 0===Oe(this,new y(e,t))},a.isFinite=function(){return!!this.c},a.isGreaterThan=a.gt=function(e,t){return Oe(this,new y(e,t))>0},a.isGreaterThanOrEqualTo=a.gte=function(e,t){return 1===(t=Oe(this,new y(e,t)))||0===t},a.isInteger=function(){return!!this.c&&Ne(this.e/ye)>this.c.length-2},a.isLessThan=a.lt=function(e,t){return Oe(this,new y(e,t))<0},a.isLessThanOrEqualTo=a.lte=function(e,t){return-1===(t=Oe(this,new y(e,t)))||0===t},a.isNaN=function(){return!this.s},a.isNegative=function(){return this.s<0},a.isPositive=function(){return this.s>0},a.isZero=function(){return!!this.c&&0==this.c[0]},a.minus=function(e,t){var l,s,o,r,n=this,a=n.s;if(t=(e=new y(e,t)).s,!a||!t)return new y(NaN);if(a!=t)return e.s=-t,n.plus(e);var i=n.e/ye,c=e.e/ye,d=n.c,f=e.c;if(!i||!c){if(!d||!f)return d?(e.s=-t,e):new y(f?n:NaN);if(!d[0]||!f[0])return f[0]?(e.s=-t,e):new y(d[0]?n:3==u?-0:0)}if(i=Ne(i),c=Ne(c),d=d.slice(),a=i-c){for((r=a<0)?(a=-a,o=d):(c=i,o=f),o.reverse(),t=a;t--;o.push(0));o.reverse()}else for(s=(r=(a=d.length)<(t=f.length))?a:t,a=t=0;t<s;t++)if(d[t]!=f[t]){r=d[t]<f[t];break}if(r&&(o=d,d=f,f=o,e.s=-e.s),(t=(s=f.length)-(l=d.length))>0)for(;t--;d[l++]=0);for(t=be-1;s>a;){if(d[--s]<f[s]){for(l=s;l&&!d[--l];d[l]=t);--d[l],d[s]+=be}d[s]-=f[s]}for(;0==d[0];d.splice(0,1),--c);return d[0]?C(e,d,c):(e.s=3==u?-1:1,e.c=[e.e=0],e)},a.modulo=a.mod=function(e,t){var s,o,r=this;return e=new y(e,t),!r.c||!e.s||e.c&&!e.c[0]?new y(NaN):!e.c||r.c&&!r.c[0]?new y(r):(9==x?(o=e.s,e.s=1,s=l(r,e,0,3),e.s=o,s.s*=o):s=l(r,e,0,x),(e=r.minus(s.times(e))).c[0]||1!=x||(e.s=r.s),e)},a.multipliedBy=a.times=function(e,t){var l,s,o,r,n,a,i,c,u,d,f,p,h,m,x,g=this,v=g.c,_=(e=new y(e,t)).c;if(!(v&&_&&v[0]&&_[0]))return!g.s||!e.s||v&&!v[0]&&!_||_&&!_[0]&&!v?e.c=e.e=e.s=null:(e.s*=g.s,v&&_?(e.c=[0],e.e=0):e.c=e.e=null),e;for(s=Ne(g.e/ye)+Ne(e.e/ye),e.s*=g.s,(i=v.length)<(d=_.length)&&(h=v,v=_,_=h,o=i,i=d,d=o),o=i+d,h=[];o--;h.push(0));for(m=be,x=Ce,o=d;--o>=0;){for(l=0,f=_[o]%x,p=_[o]/x|0,r=o+(n=i);r>o;)l=((c=f*(c=v[--n]%x)+(a=p*c+(u=v[n]/x|0)*f)%x*x+h[r]+l)/m|0)+(a/x|0)+p*u,h[r--]=c%m;h[r]=l}return l?++s:h.splice(0,1),C(e,h,s)},a.negated=function(){var e=new y(this);return e.s=-e.s||null,e},a.plus=function(e,t){var l,s=this,o=s.s;if(t=(e=new y(e,t)).s,!o||!t)return new y(NaN);if(o!=t)return e.s=-t,s.minus(e);var r=s.e/ye,n=e.e/ye,a=s.c,i=e.c;if(!r||!n){if(!a||!i)return new y(o/0);if(!a[0]||!i[0])return i[0]?e:new y(a[0]?s:0*o)}if(r=Ne(r),n=Ne(n),a=a.slice(),o=r-n){for(o>0?(n=r,l=i):(o=-o,l=a),l.reverse();o--;l.push(0));l.reverse()}for((o=a.length)-(t=i.length)<0&&(l=i,i=a,a=l,t=o),o=0;t;)o=(a[--t]=a[t]+i[t]+o)/be|0,a[t]=be===a[t]?0:a[t]%be;return o&&(a=[o].concat(a),++n),C(e,a,n)},a.precision=a.sd=function(e,t){var l,s,o,r=this;if(null!=e&&e!==!!e)return Se(e,1,Ee),null==t?t=u:Se(t,0,8),E(new y(r),e,t);if(!(l=r.c))return null;if(s=(o=l.length-1)*ye+1,o=l[o]){for(;o%10==0;o/=10,s--);for(o=l[0];o>=10;o/=10,s++);}return e&&r.e+1>s&&(s=r.e+1),s},a.shiftedBy=function(e){return Se(e,-9007199254740991,we),this.times("1e"+e)},a.squareRoot=a.sqrt=function(){var e,t,s,o,r,n=this,a=n.c,i=n.s,d=n.e,f=c+4,p=new y("0.5");if(1!==i||!a||!a[0])return new y(!i||i<0&&(!a||a[0])?NaN:a?n:1/0);if(0==(i=Math.sqrt(+N(n)))||i==1/0?(((t=Me(a)).length+d)%2==0&&(t+="0"),i=Math.sqrt(+t),d=Ne((d+1)/2)-(d<0||d%2),s=new y(t=i==1/0?"5e"+d:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+d)):s=new y(i+""),s.c[0])for((i=(d=s.e)+f)<3&&(i=0);;)if(r=s,s=p.times(r.plus(l(n,r,f,1))),Me(r.c).slice(0,i)===(t=Me(s.c)).slice(0,i)){if(s.e<d&&--i,"9999"!=(t=t.slice(i-3,i+1))&&(o||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(E(s,s.e+c+2,1),e=!s.times(s).eq(n));break}if(!o&&(E(r,r.e+c+2,0),r.times(r).eq(n))){s=r;break}f+=4,i+=4,o=1}return E(s,s.e+c+1,u,e)},a.toExponential=function(e,t){return null!=e&&(Se(e,0,Ee),e++),w(this,e,t,1)},a.toFixed=function(e,t){return null!=e&&(Se(e,0,Ee),e=e+this.e+1),w(this,e,t)},a.toFormat=function(e,t,l){var s,o=this;if(null==l)null!=e&&t&&"object"==typeof t?(l=t,t=null):e&&"object"==typeof e?(l=e,e=t=null):l=v;else if("object"!=typeof l)throw Error(ve+"Argument not an object: "+l);if(s=o.toFixed(e,t),o.c){var r,n=s.split("."),a=+l.groupSize,i=+l.secondaryGroupSize,c=l.groupSeparator||"",u=n[0],d=n[1],f=o.s<0,p=f?u.slice(1):u,h=p.length;if(i&&(r=a,a=i,i=r,h-=r),a>0&&h>0){for(r=h%a||a,u=p.substr(0,r);r<h;r+=a)u+=c+p.substr(r,a);i>0&&(u+=c+p.slice(r)),f&&(u="-"+u)}s=d?u+(l.decimalSeparator||"")+((i=+l.fractionGroupSize)?d.replace(new RegExp("\\d{"+i+"}\\B","g"),"$&"+(l.fractionGroupSeparator||"")):d):u}return(l.prefix||"")+s+(l.suffix||"")},a.toFraction=function(e){var t,s,o,r,n,a,c,d,f,p,m,x,g=this,v=g.c;if(null!=e&&(!(c=new y(e)).isInteger()&&(c.c||1!==c.s)||c.lt(i)))throw Error(ve+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+N(c));if(!v)return new y(g);for(t=new y(i),f=s=new y(i),o=d=new y(i),x=Me(v),n=t.e=x.length-g.e-1,t.c[0]=ke[(a=n%ye)<0?ye+a:a],e=!e||c.comparedTo(t)>0?n>0?t:f:c,a=h,h=1/0,c=new y(x),d.c[0]=0;p=l(c,t,0,1),1!=(r=s.plus(p.times(o))).comparedTo(e);)s=o,o=r,f=d.plus(p.times(r=f)),d=r,t=c.minus(p.times(r=t)),c=r;return r=l(e.minus(s),o,0,1),d=d.plus(r.times(f)),s=s.plus(r.times(o)),d.s=f.s=g.s,m=l(f,o,n*=2,u).minus(g).abs().comparedTo(l(d,s,n,u).minus(g).abs())<1?[f,o]:[d,s],h=a,m},a.toNumber=function(){return+N(this)},a.toPrecision=function(e,t){return null!=e&&Se(e,1,Ee),w(this,e,t,2)},a.toString=function(e){var t,l=this,o=l.s,r=l.e;return null===r?o?(t="Infinity",o<0&&(t="-"+t)):t="NaN":(null==e?t=r<=d||r>=f?Ie(Me(l.c),r):Fe(Me(l.c),r,"0"):10===e&&b?t=Fe(Me((l=E(new y(l),c+r+1,u)).c),l.e,"0"):(Se(e,2,_.length,"Base"),t=s(Fe(Me(l.c),r,"0"),10,e,o,!0)),o<0&&l.c[0]&&(t="-"+t)),t},a.valueOf=a.toJSON=function(){return N(this)},a._isBigNumber=!0,a[Symbol.toStringTag]="BigNumber",a[Symbol.for("nodejs.util.inspect.custom")]=a.valueOf,null!=t&&y.set(t),y}();class ze{constructor(e,l,s){t(this,"id"),t(this,"level"),t(this,"properties"),this.id=e,this.level=l||0,this.properties=s??{}}}class Te{constructor(e,l,s,o,r){t(this,"id"),t(this,"level"),t(this,"properties"),t(this,"stock"),t(this,"snapshotValue"),t(this,"miners"),t(this,"claimCallback"),this.id=e,this.level=l||0,this.properties=s??{},this.stock=Object.assign({blocks:0,golds:0,chests:0},o??{}),this.snapshotValue=this._snapshot(),this.miners=new Map,this.claimCallback=null==r?void 0:r.claimCallback}_snapshot(){return this.snapshotValue={stock:{...this.stock}},this.snapshotValue}_claimBefore(){const e=this.getMiners();for(const t of e)t._storeBefore("claim");this._snapshot()}_claimAfter(e,t){this.stock=De.getEmptyEarnings();const l=this.getMiners(),s=De.extractStoredMinerDatas(l,t);for(const o of l){const t=(s??{})[o.id]??{};if(0===t.code){const l=t.data??{},s=null;o._storeAfter("claim",s,e,l)}else console.log("[Storage] ++++++++++ ClaimAfter -> Miner[] data store failed: ",t)}}store(e,t,l,s){e&&!this.miners.has(e)&&this.miners.set(e,e);const o=new Be(this.properties.max_gold_capacity??0),r=this.stock.golds??0,n=o.gt(0)?Math.min(o.minus(r).toNumber(),l):l;if(n<=0)return this.stock;const a=n<l?new Be(s).times(n).div(l):new Be(s),i=n<l?new Be(t).times(n).div(l):new Be(t);return this.stock.golds=new Be(n).plus(r).toNumber(),this.stock.chests=a.plus(this.stock.chests??0).toNumber(),this.stock.blocks=i.plus(this.stock.blocks??0).toNumber(),this.stock}getMiners(){return Array.from(this.miners.values())}async claim(e=!1){try{if("function"!=typeof this.claimCallback)return De.result(501,"Claim method undefined");this._claimBefore();const t=this.getMiners(),l=[];for(const e of t)l.push({minerId:e.id,clicks:e.totalClicks,energy:e.energy});const s=await this.claimCallback(l,this.stock,e);return 0===s.code&&this._claimAfter(e,s),s}catch(t){return console.log("[Storage] ++++++++++ claim error: ",t),De.result(500,t.message||"System error")}}}const Pe=class e{constructor(l,s,o,r,n,a,i){t(this,"id"),t(this,"level"),t(this,"pool"),t(this,"storage"),t(this,"automatic"),t(this,"properties"),t(this,"snapshotValue"),t(this,"syncCallback"),t(this,"startupMs"),t(this,"energy"),t(this,"totalClicks"),t(this,"storedClicks"),t(this,"energyUpdateMs"),t(this,"initialEnergy"),t(this,"result"),t(this,"intervalId"),this.pool=n,this.storage=a,this.id=l,this.automatic=r||!1,this.level=s||0,this.properties=o??{},!r||null!==this.properties.max_energy_points&&void 0!==this.properties.max_energy_points||(this.properties.max_energy_points=e.MAX_AUTO_ENERGY_POINTS),this.syncCallback=null==i?void 0:i.syncCallback,this._initialize(i),this.snapshotValue=this._snapshot(),(i.autoStart??1)&&this.start()}_initialize(t){var l;this.startupMs=(null==t?void 0:t.startupMs)??Date.now(),this.energy=(null==t?void 0:t.energy)??(null==(l=this.properties)?void 0:l.max_energy_points)??0,this.totalClicks=(null==t?void 0:t.totalClicks)??0,this.storedClicks=0,this.energyUpdateMs=Date.now(),this.initialEnergy=this.energy,this.result=e.getEmptyEarnings(),this.calculate()}_snapshot(){return this.snapshotValue={currentMs:Date.now(),startupMs:this.startupMs,totalClicks:this.totalClicks,storedClicks:this.storedClicks,energy:this.energy,result:{...this.result}},this.snapshotValue}_updateEnergy(){var e,t;if(this.automatic){const e=Math.floor((Date.now()-this.startupMs)/1e3);this.energy=this.initialEnergy>e?this.initialEnergy-e:0,this.energyUpdateMs=Date.now()}else{const l=(null==(e=this.properties)?void 0:e.max_energy_points)??0,s=(null==(t=this.properties)?void 0:t.energy_recovery_per_second)??0;if(this.energy<l){const e=Math.floor((Date.now()-this.energyUpdateMs)/1e3),t=e*s;t>0&&(this.energy=Math.min(this.energy+t,l),this.energyUpdateMs=this.energyUpdateMs+1e3*e)}}}_storeBefore(e){return console.log("action:",e),this.calculate(),this._snapshot()}_storeAfter(e,t,l,s){if(!(!["sync","claim"].includes(e)||"sync"===e&&this.storage||"claim"===e&&!this.storage))if(t||(t=this.snapshotValue),this.totalClicks=Math.max(this.totalClicks-t.totalClicks,0),this.calculate(),this.automatic&&l&&(null==s?void 0:s.energy)){const e={startupMs:t.currentMs??Date.now(),energy:null==s?void 0:s.energy};this._initialize(e),this.storedClicks=0}else this.automatic&&(this.storedClicks+=t.totalClicks)}minuteEnergy(){return Math.ceil(this.energy/60)}minuteEnergyMax(){var e;return Math.ceil((null==(e=this.properties)?void 0:e.max_energy_points)/60)}start(){this.intervalId=setInterval((()=>{this._updateEnergy()}),1e3)}stop(){this.intervalId&&clearInterval(this.intervalId)}click(e=!1){if(this.automatic){const e=Number(BigInt(Date.now().toString())-BigInt(this.startupMs.toString())),t=Math.floor(e/1e3),l=Math.min(t,this.initialEnergy);this.totalClicks=Math.max(l-this.storedClicks,0),this.energy=Math.max(this.initialEnergy-t,0)}else this.energy>0&&(this.totalClicks++,this.energy--);return e&&this.calculate(),this.totalClicks}calculate(){const t=this.properties,l=this.pool?this.pool.properties:{},s=this.automatic?((null==t?void 0:t.blocks_per_hour)??0)/3600:(null==t?void 0:t.blocks_per_click)??0,o=(null==l?void 0:l.golds_per_block)??0,r=(null==l?void 0:l.chests_per_block)??0,n=s*this.totalClicks,a=n*o,i=n*r;if(this.storage){const e=Math.max(new Be(n).minus(this.result.blocks).toNumber(),0),t=Math.max(new Be(a).minus(this.result.golds).toNumber(),0),l=Math.max(new Be(i).minus(this.result.chests).toNumber(),0);(e>0||t>0||l>0)&&this.storage.store(this,e,t,l)}return this.result.blocks=n,this.result.golds=a,this.result.chests=i,{result:this.result,earnings:this.storage?e.getEmptyEarnings():this.result,stock:this.storage?this.storage.stock:e.getEmptyEarnings()}}async sync(t=!1){try{if("function"!=typeof this.syncCallback)return e.result(501,"Sync method undefined");const l=this._storeBefore("sync"),s=await this.syncCallback(this.id,this.totalClicks,this.energy,t);return 0===s.code&&this._storeAfter("sync",l,t,s.data),s}catch(l){return console.log("[Miner] ++++++++++ sync error: ",l),e.result(500,l.message||"System error")}}static getEmptyEarnings(){return{blocks:0,golds:0,chests:0}}static isEmptyEarnings(e){const t=(null==e?void 0:e.blocks)??0,l=(null==e?void 0:e.golds)??0,s=(null==e?void 0:e.chests)??0;return 0===t&&0===l&&0===s}static isEarningsExceeded(e,t){const l=(null==e?void 0:e.blocks)??0,s=(null==e?void 0:e.golds)??0,o=(null==e?void 0:e.chests)??0,r=(null==t?void 0:t.blocks)??0,n=(null==t?void 0:t.golds)??0,a=(null==t?void 0:t.chests)??0;return l>r||s>n||o>a}static addEarnings(e,t){return{blocks:new Be((null==e?void 0:e.blocks)??0).plus((null==t?void 0:t.blocks)??0).toNumber(),golds:new Be((null==e?void 0:e.golds)??0).plus((null==t?void 0:t.golds)??0).toNumber(),chests:new Be((null==e?void 0:e.chests)??0).plus((null==t?void 0:t.chests)??0).toNumber()}}static subEarnings(e,t,l=!1){const s={blocks:new Be((null==e?void 0:e.blocks)??0).minus((null==t?void 0:t.blocks)??0).toNumber(),golds:new Be((null==e?void 0:e.golds)??0).minus((null==t?void 0:t.golds)??0).toNumber(),chests:new Be((null==e?void 0:e.chests)??0).minus((null==t?void 0:t.chests)??0).toNumber()};return l||(s.blocks=Math.max(s.blocks,0),s.golds=Math.max(s.golds,0),s.chests=Math.max(s.chests,0)),s}static makeMinerResults(t,l,s,o=null){const r={};for(const n of t)r[n.id]=e.result(l,s,o);return r}static extractStoredMinerDatas(t,l){var s,o,r;if(0===l.code){const e=(null==(s=l.data)?void 0:s.results)??{},t=(null==(o=l.data)?void 0:o.balance)??{},n=(null==(r=l.data)?void 0:r.stock)??{};for(const l in e)0===e[l].code&&e[l].data&&(e[l].data.balance=t,e[l].data.stock=n);return e}return e.makeMinerResults(t,l.code,l.message,l.data)}static async batchSync(t,l=!1){var s;try{if("function"!=typeof e.batchSyncCallback)return e.makeMinerResults(t,501,"Batch sync method undefined");const o={};for(const e of t)o[e.id]=e._storeBefore("sync");const r=[];for(const e of t)r.push({minerId:e.id,clicks:e.totalClicks,energy:e.energy});const n=await e.batchSyncCallback(r,l);if(0===n.code){const e=(null==(s=n.data)?void 0:s.results)??{};for(const l of t){0===(e[l.id]??{}).code&&l._storeAfter("sync",o[l.id],!1,e)}}return e.extractStoredMinerDatas(t,n)}catch(o){return console.log("[Miner] ++++++++++ batchSync error: ",o),e.makeMinerResults(t,500,o.message||"System error")}}static result(e,t,l=null){return{code:e,message:t,data:l}}};t(Pe,"MAX_AUTO_ENERGY_POINTS",31536e7),t(Pe,"batchSyncCallback");let De=Pe;const Ue=P(u({__name:"index",setup(e){const{connetWallet:t,disconnectWallet:n,tonConnectUI:a,connected:i,userFriendlyAddress:c}=ae(),u=f();function d(){n(),u.value.close()}const p=f(i);a.onStatusChange((e=>{console.log("wallet change:",e,c),p.value=!!e}));const{getUserInfo:h,userInfo:m}=ie(),x=H(),g=f(),v=f({level:0,current:{properties:{golds_per_block:0,chests_per_block:0},cost:{golds:0,diamonds:0}},next:{properties:{golds_per_block:0,chests_per_block:0},cost:{golds:0,diamonds:0}}}),A=f({level:0,current:{properties:{max_gold_capacity:0},cost:{golds:0,diamonds:0}},next:{properties:{max_gold_capacity:0},cost:{golds:0,diamonds:0}}}),I=f({level:0,current:{properties:{blocks_per_click:0,max_energy_points:0,energy_recovery_per_second:0},cost:{golds:0,diamonds:0}},next:{properties:{blocks_per_click:0,max_energy_points:0,energy_recovery_per_second:0},cost:{golds:0,diamonds:0}}}),F=f([]),T=f({active_count:0,golds_per_block:0,chests_per_block:0,blocks_per_hour:0,golds_per_hour:0,chests_per_hour:0}),P=f({phase:0,step:0,status:0,steps:[]}),D=f([]),U=f(),j=f(),K=f(0);function ue(e){"account"===e?x.pushTab({name:e}):x.push({name:e})}async function de(e,t,l,s){return console.log(e,s),await ne.miningPickSync({clicks:t,energy:l},{disableInterceptor:!0})}async function fe(e,t,l){return console.log(l),await ne.mineClaim({mine_infos:e,stock:t},{disableInterceptor:!0})}h().then((()=>{!function(){const{getUserAssets:e}=ie();e().then((e=>{g.value=e}))}(),function(){const e=new Promise(((e,t)=>{ne.airdopTripInfo().then((t=>{P.value=t||{},e(P.value)})).catch(t)})),t=new Promise(((e,t)=>{ne.miningInfo().then((t=>{const{pool:l,pick:s,miner:o}=t,{miners:r,storage:n}=o||{};v.value=l||{},I.value=s||{},F.value=(null==r?void 0:r.miners)||[],T.value=(null==r?void 0:r.summary)||{},A.value=n||{},U.value=new ze(null==m?void 0:m.id,v.value.level,v.value.current.properties);const a={blocks:A.value.stock_blocks,golds:A.value.stock_golds,chests:A.value.stock_chests},i={claimCallback:fe};j.value=new Te(null==m?void 0:m.id,A.value.level,A.value.current.properties,a,i);const c={autoStart:!0,startupMs:null,totalClicks:null,energy:I.value.energy>=0?I.value.energy:null,syncCallback:de};F.value.forEach((e=>{D.value.push(new De(e.id,e.level,e.current.properties,!0,U.value,j.value,c))})),Me(),e(null)})).catch(t)}));X(),Promise.all([e,t]).finally(J)}()}));const me=f(!1),xe=V((()=>{var e;return Number((null==(e=P.value)?void 0:e.step)||0)}));function ge(){me.value=!0}function ve(){me.value=!1}const _e=f(!1);function be(){_e.value=!0}function ye(){_e.value=!1}const we=f(!1);function ke(){we.value=!0}function Ce(){we.value=!1}function Ee(){j.value&&ce((()=>{j.value&&(X(),j.value.claim(!0).then((e=>{console.log(e)})).finally(J))}))}const Ne=f(0);function Me(){var e,t,l,s,o,r,n,a,i,c;K.value=j.value?Math.ceil(Number(null==(t=null==(e=j.value)?void 0:e.stock)?void 0:t.golds)/Number(null==(o=null==(s=null==(l=A.value)?void 0:l.current)?void 0:s.properties)?void 0:o.max_gold_capacity)*100):0,console.log(K.value,null==(n=null==(r=j.value)?void 0:r.stock)?void 0:n.golds,null==(c=null==(i=null==(a=A.value)?void 0:a.current)?void 0:i.properties)?void 0:c.max_gold_capacity),K.value>=100&&Oe()}function Oe(){Ne.value&&clearInterval(Ne.value)}return q((()=>{Oe(),Ne.value=setInterval((()=>{D.value.forEach((e=>{e.click(!0)})),Me()}),1e4)})),Q((()=>{Oe()})),R((()=>{Oe()})),(e,n)=>{const a=z,i=G,f=B,h=he,m=pe,x=se,F=Z,D=le,U=L,V=ee,R=te,H=W("layout-tabbar-uni");return _(),b(H,null,{default:y((()=>[w(f,{class:"page"},{default:y((()=>[w(f,{class:"page-container"},{default:y((()=>[w(f,{class:"flex-x-between flex-wrap p-x-4 p-b-3.5"},{default:y((()=>[w(f,{class:"mt-3.5 flex-x-between flex-1"},{default:y((()=>[w(f,{class:"value-box mr-4 box-border h7 min-w-200rpx flex-x-between of-hidden rounded-3 pl-2 pr-3"},{default:y((()=>[w(a,{name:"/static/icon/diamond.png",size:"40rpx"}),w(i,{class:"pl-8rpx text-md color-white"},{default:y((()=>[O(S(("assetBalanceFormat"in e?e.assetBalanceFormat:N(l))(N(g),N(s).DIAMOND)),1)])),_:1})])),_:1}),w(f,{class:"value-box box-border h7 min-w-200rpx flex-x-between of-hidden rounded-3 pl-2 pr-3"},{default:y((()=>[w(a,{name:"/static/icon/baoxiang.png",size:"30rpx"}),w(i,{class:"pl-8rpx text-md color-white"},{default:y((()=>[O(S(("assetBalanceFormat"in e?e.assetBalanceFormat:N(l))(N(g),N(s).CHEST)),1)])),_:1})])),_:1})])),_:1}),w(f,{class:"mt-3.5 flex-x-end flex-1"},{default:y((()=>[N(p)?(_(),b(f,{key:1,class:"value-box h7 flex-center of-hidden rounded-3 pr-3"},{default:y((()=>[w(m,null,{default:y((()=>[w(h,{ref_key:"dropMenu",ref:u,title:("dynamicHide"in e?e.dynamicHide:N(o))(N(c),2,2,"*",2)},{default:y((()=>[w(f,{class:"flex-y-center justify-end p-x-40rpx p-y-20rpx",onClick:d},{default:y((()=>[w(i,{class:"pr-24rpx text-md"},{default:y((()=>[O(" Disconnect ")])),_:1}),w(a,{name:"logout",size:"40rpx"})])),_:1})])),_:1},8,["title"])])),_:1})])),_:1})):(_(),b(f,{key:0,class:"value-box h7 flex-center of-hidden rounded-3 p-x-3",onClick:N(t)},{default:y((()=>[w(a,{name:"/static/icon/wallet_white.png",size:"28rpx"})])),_:1},8,["onClick"]))])),_:1})])),_:1}),w(f,{class:"m-y-10 flex-center"},{default:y((()=>[w(a,{name:"/static/icon/coin_bit.png",size:"60rpx"}),w(i,{class:"pl-2 text-60rpx color-white"},{default:y((()=>[O(S(("assetBalanceFormat"in e?e.assetBalanceFormat:N(l))(N(g),N(s).GOLD)),1)])),_:1})])),_:1}),w(f,{class:"portal flex-center",onClick:be},{default:y((()=>[w(f,{class:"portal-container flex-center flex-col"},{default:y((()=>[w(i,{class:"text-md color-white"},{default:y((()=>[O(" Unlock ")])),_:1}),w(i,{class:"text-md color-white"},{default:y((()=>[O(" Airdrop ")])),_:1})])),_:1}),w(f,{class:"portal-bg"})])),_:1}),w(f,{class:"road flex-center"},{default:y((()=>[w(f,{class:"road-container"},{default:y((()=>[w(f,{class:M(["ball ball-1",{success:N(P).status,pending:4===N(xe)}]),onClick:ge},{default:y((()=>[O(" 5 ")])),_:1},8,["class"]),w(f,{class:M(["ball ball-2",{success:N(xe)>3,pending:3===N(xe)}]),onClick:ge},{default:y((()=>[O(" 4 ")])),_:1},8,["class"]),w(f,{class:M(["ball ball-3",{success:N(xe)>2,pending:2===N(xe)}]),onClick:ge},{default:y((()=>[O(" 3 ")])),_:1},8,["class"]),w(f,{class:M(["ball ball-4",{success:N(xe)>1,pending:1===N(xe)}]),onClick:ge},{default:y((()=>[O(" 2 ")])),_:1},8,["class"]),w(f,{class:M(["ball ball-5",{success:N(xe)>0,pending:0===N(xe)}]),onClick:ge},{default:y((()=>[O(" 1 ")])),_:1},8,["class"])])),_:1})])),_:1}),w(f,{class:"mine flex-center"},{default:y((()=>[w(f,{class:"mine-container flex"},{default:y((()=>[w(f,{class:"flex flex-1 flex-col"},{default:y((()=>[w(f,{class:"mb-20rpx h-112rpx flex-y-center"},{default:y((()=>[w(f,{class:"car"},{default:y((()=>[w(f,{class:"h-full flex-center"},{default:y((()=>[w(f,{class:"value-box of-hidden rounded-3 p-x-18rpx p-y-6rpx"},{default:y((()=>[w(i,{class:"text-sm color-white"},{default:y((()=>[O(" Mining ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),w(f,{class:"value-box box-border h-58rpx w-210rpx flex-x-between flex-nowrap of-hidden rounded-3 p-x-18rpx p-y-12rpx"},{default:y((()=>[w(a,{name:"/static/icon/coin_bit.png",size:"30rpx","custom-style":"margin-right: 16rpx;"}),w(i,{class:"whitespace-nowrap text-sm color-white"},{default:y((()=>{var t;return[O(" +"+S(("balanceFormat"in e?e.balanceFormat:N(r))(null==(t=N(T))?void 0:t.golds_per_hour))+" / h ",1)]})),_:1})])),_:1}),w(f,{class:"h-85rpx flex-y-center"},{default:y((()=>[w(f,{class:"rail ml-68rpx"})])),_:1}),w(f,{class:"cart pos-relative mr-20rpx h-54rpx flex flex-1 items-end"},{default:y((()=>[w(f,{class:"pos-absolute pos-bottom-0 z-3"},{default:y((()=>[w(a,{name:"/static/home/cart.png",size:"78rpx"})])),_:1}),w(f,{class:"value-box pos-relative z1 mt-12rpx h-full w-full of-hidden rounded-3"},{default:y((()=>[w(x,{percentage:N(K),color:"#26a0da","hide-text":"","custom-style":"height: 54rpx; padding: 0; position: absolute; left: 0; right: 0; z-index: 2;"},null,8,["percentage"]),w(f,{class:"pos-relative pos-right-24rpx z3 h-full w-full flex items-center justify-end"},{default:y((()=>[w(a,{name:"/static/icon/coin_bit.png",size:"30rpx","custom-style":"margin-right: 16rpx;"}),w(i,{class:"whitespace-nowrap text-sm color-white"},{default:y((()=>{var t,l,s,o,n;return[O(" + "+S(("balanceFormat"in e?e.balanceFormat:N(r))(null==(l=null==(t=N(j))?void 0:t.stock)?void 0:l.golds))+" / "+S(("balanceFormat"in e?e.balanceFormat:N(r))(null==(n=null==(o=null==(s=N(A))?void 0:s.current)?void 0:o.properties)?void 0:n.max_gold_capacity)),1)]})),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),w(f,{class:"w-206rpx flex flex-col items-end"},{default:y((()=>[w(f,{class:"flex-y-cente mb-20rpx h-112rpx pr-42rpx"},{default:y((()=>[w(f,{class:"box-border h-112rpx w-112rpx flex-center of-hidden rounded-50% bg-no-repeat px-20rpx bgi-[home/boosts.png]",onClick:ke},{default:y((()=>[w(i,{class:"text-sm color-white"},{default:y((()=>[O(" Boosts ")])),_:1})])),_:1})])),_:1}),w(f,{class:"value-box box-border h-58rpx w-full flex-x-between flex-nowrap of-hidden rounded-3 p-x-18rpx p-y-12rpx"},{default:y((()=>[w(a,{name:"/static/home/mine.png",size:"30rpx","custom-style":"margin-right: 16rpx; width:50rpx !important;"}),w(i,{class:"whitespace-nowrap text-sm color-white"},{default:y((()=>[O(" Lv"+S(N(v).level||"0"),1)])),_:1})])),_:1}),w(f,{class:"h-85rpx"}),w(f,{class:"h-54rpx w-full"},{default:y((()=>[w(F,{"custom-class":"!text-sm !bg-#1a73e8 !h-full !w-full !m0 !p0",onClick:Ee},{default:y((()=>[O(" Claim ")])),_:1})])),_:1})])),_:1})])),_:1}),w(f,{class:"mine-bg"})])),_:1})])),_:1}),w(f,{class:"page-top-shadow"}),w(f,{class:"page-bottom-shadow"}),w(U,{modelValue:N(me),"onUpdate:modelValue":n[1]||(n[1]=e=>Y(me)?me.value=e:null),"z-index":9999,position:"bottom","custom-style":"background: unset;","safe-area-inset-bottom":"",onClose:ve},{default:y((()=>[w(f,{class:"box-border w-100vw flex-center px"},{default:y((()=>[w(f,{class:"box-border w-full flex-center flex-col rounded-t-3 bg-popup p-40rpx"},{default:y((()=>{var e;return[w(f,{class:"w-full flex-x-between"},{default:y((()=>[w(i,{class:"text-lg color-white"},{default:y((()=>[O(" Airdrop Trip (Step "+S(N(xe)+1)+") ",1)])),_:1}),w(a,{name:"close",size:"32rpx",color:"#FFFFFF",onClick:n[0]||(n[0]=e=>me.value=!1)})])),_:1}),w(f,{class:"my-36rpx flex-center"},{default:y((()=>[w(a,{name:"/static/icon/ticket.png",size:"45rpx"}),w(i,{class:"px-12rpx text-lg color-white"},{default:y((()=>{var e;return[O(" + "+S(null==(e=N(P).steps[N(xe)])?void 0:e.reward_tickets),1)]})),_:1}),w(i,{class:"text-md color-desc"},{default:y((()=>[O(" Airdrop Ticket ")])),_:1})])),_:1}),w(f,{class:"mb-32rpx"},{default:y((()=>[w(i,{class:"text-sm color-desc"},{default:y((()=>[O(" Please complete all tasks in the 'Airdrop Trip' before unlocking airdrop eligibility. ")])),_:1})])),_:1}),(_(!0),k(C,null,E(null==(e=N(P).steps[N(xe)])?void 0:e.conditions,((e,t)=>(_(),b(f,{key:t,class:"w-full flex flex-center flex-col"},{default:y((()=>{var l;return[w(f,{class:"w-full flex flex-col rounded-3 bg-cell"},{default:y((()=>[(_(!0),k(C,null,E(e,((e,t)=>(_(),b(f,{key:t,class:"my-20rpx box-border flex-y-center px-30rpx"},{default:y((()=>[w(f,{class:"mr-34rpx h-75rpx w-75rpx flex-center rounded-3 bg-cell-icon"},{default:y((()=>[w(D,{name:`${null==e?void 0:e.icon}`,size:"46rpx","custom-class":"rounded-3"},null,8,["name"])])),_:2},1024),w(f,{class:"flex flex-col"},{default:y((()=>[w(i,{class:"text-md color-desc"},{default:y((()=>[O(S(e.title),1)])),_:2},1024),w(i,{class:"text-lg color-white"},{default:y((()=>[O(S(e.operator)+" "+S(e.value),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024),t<(null==(l=N(P).steps[N(xe)])?void 0:l.conditions.length)-1?(_(),b(i,{key:0,class:"my-16rpx text-lg color-white"},{default:y((()=>[O(" OR ")])),_:1})):$("",!0)]})),_:2},1024)))),128))]})),_:1})])),_:1})])),_:1},8,["modelValue"]),w(U,{modelValue:N(we),"onUpdate:modelValue":n[6]||(n[6]=e=>Y(we)?we.value=e:null),"z-index":9999,position:"bottom","custom-style":"background: unset;","safe-area-inset-bottom":"",onClose:Ce},{default:y((()=>[w(f,{class:"box-border w-100vw flex-center px"},{default:y((()=>[w(f,{class:"box-border w-full flex-center flex-col rounded-t-3 bg-popup p-40rpx"},{default:y((()=>[w(f,{class:"w-full flex-x-between"},{default:y((()=>[w(i,{class:"text-lg color-white"},{default:y((()=>[O(" Boosts ")])),_:1}),w(a,{name:"close",size:"32rpx",color:"#FFFFFF",onClick:Ce})])),_:1}),w(f,{class:"flex-center pt-50rpx"},{default:y((()=>[w(V,{src:oe,mode:"scaleToFill",class:"mr-16rpx h-48rpx w-48rpx"}),w(i,{class:"text-lg text-white"},{default:y((()=>[O(S(("assetBalanceFormat"in e?e.assetBalanceFormat:N(l))(N(g),N(s).GOLD)),1)])),_:1}),w(V,{src:re,mode:"scaleToFill",class:"ml-36rpx mr-16rpx h-48rpx w-48rpx"}),w(i,{class:"text-lg text-white"},{default:y((()=>[O(S(("assetBalanceFormat"in e?e.assetBalanceFormat:N(l))(N(g),N(s).DIAMOND)),1)])),_:1})])),_:1}),w(f,{class:"w-full flex flex-col"},{default:y((()=>[w(f,{class:"my-32rpx flex-x-between"},{default:y((()=>[w(i,{class:"text-md color-desc"},{default:y((()=>[O(" Boost Items ")])),_:1})])),_:1}),w(f,{class:"mb-32rpx box-border w-full flex-y-center rounded-3 bg-cell px-12rpx py-20rpx",onClick:n[2]||(n[2]=e=>ue("homePool"))},{default:y((()=>[w(R,{src:"/static/home/mine.png",mode:"heightFix","custom-class":"h-90rpx max-w-[155rpx] mr-12rpx"}),w(f,{class:"flex flex-col"},{default:y((()=>[w(f,{class:"flex-y-center"},{default:y((()=>[w(i,{class:"text-md color-white"},{default:y((()=>[O(" Mining Pool ")])),_:1}),w(i,{class:"pl-20rpx text-md color-value"},{default:y((()=>[O(" Level "+S(N(v).level||0),1)])),_:1})])),_:1}),w(i,{class:"mb-14rpx mt-20rpx text-sm color-desc"},{default:y((()=>[O(" Increase coins and chests per block ")])),_:1}),w(f,{class:"flex-y-center"},{default:y((()=>{var e,t,l,s,o,r,n,c,u,d,p,h;return[(null==(l=null==(t=null==(e=N(v))?void 0:e.next)?void 0:t.cost)?void 0:l.golds)>0?(_(),b(f,{key:0,class:"mr-12rpx flex-y-center"},{default:y((()=>[w(a,{name:"/static/icons/gold.png",size:"25rpx"}),w(i,{class:"text-md color-white"},{default:y((()=>{var e,t,l;return[O(S((null==(l=null==(t=null==(e=N(v))?void 0:e.next)?void 0:t.cost)?void 0:l.golds)||0),1)]})),_:1})])),_:1})):$("",!0),(null==(r=null==(o=null==(s=N(v))?void 0:s.next)?void 0:o.cost)?void 0:r.golds)>0&&(null==(u=null==(c=null==(n=N(v))?void 0:n.next)?void 0:c.cost)?void 0:u.diamonds)>0?(_(),b(i,{key:1,class:"mr-12rpx text-md color-white"},{default:y((()=>[O(" + ")])),_:1})):$("",!0),(null==(h=null==(p=null==(d=N(v))?void 0:d.next)?void 0:p.cost)?void 0:h.diamonds)>0?(_(),b(f,{key:2,class:"mr-12rpx flex-y-center"},{default:y((()=>[w(a,{name:"/static/icons/diamond.png",size:"25rpx"}),w(i,{class:"text-md color-white"},{default:y((()=>{var e,t,l;return[O(S((null==(l=null==(t=null==(e=N(v))?void 0:e.next)?void 0:t.cost)?void 0:l.diamonds)||0),1)]})),_:1})])),_:1})):$("",!0),w(i,{class:"text-md color-desc"},{default:y((()=>[O(" to upgrade ")])),_:1})]})),_:1})])),_:1})])),_:1}),w(f,{class:"mb-32rpx box-border w-full flex-y-center rounded-3 bg-cell px-12rpx py-20rpx",onClick:n[3]||(n[3]=e=>ue("homePickaxe"))},{default:y((()=>[w(f,{class:"mr-12rpx w-155rpx flex-center"},{default:y((()=>[w(R,{src:"/static/home/pickaxe.png",mode:"heightFix","custom-class":"h-90rpx max-w-[155rpx]"})])),_:1}),w(f,{class:"flex flex-col"},{default:y((()=>[w(f,{class:"flex-y-center"},{default:y((()=>[w(i,{class:"text-md color-white"},{default:y((()=>[O(" Mining Pickaxe ")])),_:1}),w(i,{class:"pl-20rpx text-md color-value"},{default:y((()=>[O(" Level "+S(N(I).level||0),1)])),_:1})])),_:1}),w(i,{class:"mb-14rpx mt-20rpx text-sm color-desc"},{default:y((()=>[O(" Increase blocks mined per click ")])),_:1}),w(f,{class:"flex-y-center"},{default:y((()=>{var e,t,l,s,o,r,n,c,u,d,p,h;return[(null==(l=null==(t=null==(e=N(I))?void 0:e.next)?void 0:t.cost)?void 0:l.golds)>0?(_(),b(f,{key:0,class:"mr-12rpx flex-y-center"},{default:y((()=>[w(a,{name:"/static/icons/gold.png",size:"25rpx"}),w(i,{class:"text-md color-white"},{default:y((()=>{var e,t,l;return[O(S((null==(l=null==(t=null==(e=N(I))?void 0:e.next)?void 0:t.cost)?void 0:l.golds)||0),1)]})),_:1})])),_:1})):$("",!0),(null==(r=null==(o=null==(s=N(I))?void 0:s.next)?void 0:o.cost)?void 0:r.golds)>0&&(null==(u=null==(c=null==(n=N(I))?void 0:n.next)?void 0:c.cost)?void 0:u.diamonds)>0?(_(),b(i,{key:1,class:"mr-12rpx text-md color-white"},{default:y((()=>[O(" + ")])),_:1})):$("",!0),(null==(h=null==(p=null==(d=N(I))?void 0:d.next)?void 0:p.cost)?void 0:h.diamonds)>0?(_(),b(f,{key:2,class:"mr-12rpx flex-y-center"},{default:y((()=>[w(a,{name:"/static/icons/diamond.png",size:"25rpx"}),w(i,{class:"text-md color-white"},{default:y((()=>{var e,t,l;return[O(S((null==(l=null==(t=null==(e=N(I))?void 0:e.next)?void 0:t.cost)?void 0:l.diamonds)||0),1)]})),_:1})])),_:1})):$("",!0),w(i,{class:"text-md color-desc"},{default:y((()=>[O(" to upgrade ")])),_:1})]})),_:1})])),_:1})])),_:1}),w(f,{class:"mb-32rpx box-border w-full flex-y-center rounded-3 bg-cell px-12rpx py-20rpx",onClick:n[4]||(n[4]=e=>ue("homeMiner"))},{default:y((()=>[w(f,{class:"mr-12rpx w-155rpx flex-center"},{default:y((()=>[w(R,{src:"/static/home/car.png",mode:"heightFix","custom-class":"h-90rpx max-w-[155rpx]"})])),_:1}),w(f,{class:"flex flex-col"},{default:y((()=>[w(f,{class:"flex-y-center"},{default:y((()=>[w(i,{class:"text-md color-white"},{default:y((()=>[O(" Miners ")])),_:1}),w(i,{class:"pl-20rpx text-md color-value"},{default:y((()=>[O(S(N(T).golds_per_hour||0)+" COINS / h ",1)])),_:1})])),_:1}),w(i,{class:"mb-14rpx mt-20rpx text-sm color-desc"},{default:y((()=>[O(" Increase mining speed or unlock miners ")])),_:1})])),_:1})])),_:1}),w(f,{class:"mb-32rpx box-border w-full flex-y-center rounded-3 bg-cell px-12rpx py-20rpx",onClick:n[5]||(n[5]=e=>ue("homeStorage"))},{default:y((()=>[w(f,{class:"mr-12rpx w-155rpx flex-center"},{default:y((()=>[w(R,{src:"/static/home/cart.png",mode:"heightFix","custom-class":"h-90rpx max-w-[155rpx]"})])),_:1}),w(f,{class:"flex flex-col"},{default:y((()=>[w(f,{class:"flex-y-center"},{default:y((()=>[w(i,{class:"text-md color-white"},{default:y((()=>[O(" Storage ")])),_:1}),w(i,{class:"pl-20rpx text-md color-value"},{default:y((()=>[O(" Level "+S(N(A).level||0),1)])),_:1})])),_:1}),w(i,{class:"mb-14rpx mt-20rpx text-sm color-desc"},{default:y((()=>[O(" Increase storage space for miners ")])),_:1}),w(f,{class:"flex-y-center"},{default:y((()=>{var e,t,l,s,o,r,n,c,u,d,p,h;return[(null==(l=null==(t=null==(e=N(A))?void 0:e.next)?void 0:t.cost)?void 0:l.golds)>0?(_(),b(f,{key:0,class:"mr-12rpx flex-y-center"},{default:y((()=>[w(a,{name:"/static/icons/gold.png",size:"25rpx"}),w(i,{class:"text-md color-white"},{default:y((()=>{var e,t,l;return[O(S((null==(l=null==(t=null==(e=N(A))?void 0:e.next)?void 0:t.cost)?void 0:l.golds)||0),1)]})),_:1})])),_:1})):$("",!0),(null==(r=null==(o=null==(s=N(A))?void 0:s.next)?void 0:o.cost)?void 0:r.golds)>0&&(null==(u=null==(c=null==(n=N(A))?void 0:n.next)?void 0:c.cost)?void 0:u.diamonds)>0?(_(),b(i,{key:1,class:"mr-12rpx text-md color-white"},{default:y((()=>[O(" + ")])),_:1})):$("",!0),(null==(h=null==(p=null==(d=N(A))?void 0:d.next)?void 0:p.cost)?void 0:h.diamonds)>0?(_(),b(f,{key:2,class:"mr-12rpx flex-y-center"},{default:y((()=>[w(a,{name:"/static/icons/diamond.png",size:"25rpx"}),w(i,{class:"text-md color-white"},{default:y((()=>{var e,t,l;return[O(S((null==(l=null==(t=null==(e=N(A))?void 0:e.next)?void 0:t.cost)?void 0:l.diamonds)||0),1)]})),_:1})])),_:1})):$("",!0),w(i,{class:"text-md color-desc"},{default:y((()=>[O(" to upgrade ")])),_:1})]})),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),w(U,{modelValue:N(_e),"onUpdate:modelValue":n[7]||(n[7]=e=>Y(_e)?_e.value=e:null),"z-index":9999,position:"center","custom-style":"background: unset;","safe-area-inset-bottom":"",onClose:ye},{default:y((()=>[w(f,{class:"box-border w-100vw flex-center px"},{default:y((()=>[w(f,{class:"box-border w-full flex-center flex-col rounded-t-3 bg-popup p-40rpx"},{default:y((()=>[w(f,{class:"w-full flex-x-between"},{default:y((()=>[w(i,{class:"text-lg color-white"},{default:y((()=>[O(" Unlock Airdrop ")])),_:1}),w(a,{name:"close",size:"32rpx",color:"#FFFFFF",onClick:ye})])),_:1}),w(f,{class:"my-36rpx flex-center"},{default:y((()=>[w(a,{name:"/static/icon/ticket.png",size:"45rpx"}),w(i,{class:"px-12rpx text-lg color-white"},{default:y((()=>{var e;return[O(" + "+S(null==(e=N(P).steps[N(xe)])?void 0:e.reward_tickets),1)]})),_:1}),w(i,{class:"text-md color-desc"},{default:y((()=>[O(" Airdrop Ticket ")])),_:1})])),_:1}),0===N(P).status?(_(),b(f,{key:0,class:"mb-100rpx"},{default:y((()=>[w(i,{class:"text-sm color-desc"},{default:y((()=>[O(" Please complete all tasks in the 'Airdrop Trip' before unlocking airdrop eligibility. ")])),_:1})])),_:1})):(_(),b(f,{key:1,class:"mb-100rpx"},{default:y((()=>[w(i,{class:"text-sm color-desc"},{default:y((()=>[O(" The airdrop event is about to start. Stay tuned! ")])),_:1})])),_:1})),w(f,{class:"box-border w-full flex-center px-124rpx"},{default:y((()=>[w(F,{type:"primary",round:!1,block:"","custom-class":"rounded-36rpx flex-1 h-70rpx w-full",onClick:ye},{default:y((()=>[w(i,{class:"text-lg color-white"},{default:y((()=>[O(" Ok ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-fbc26865"]]);export{Ue as default};
