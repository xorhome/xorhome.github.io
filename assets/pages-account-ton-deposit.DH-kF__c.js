import{A as e,a as t,c as s,d as l}from"./index.DRE4Ui8P.js";import{d as a,W as o,r as c,Q as r,h as u,j as n,k as d,l as f,t as x,v as m,q as p,n as i,p as _,F as y,S as w,T as h,L as b,_ as g,A as v,aF as T,U as j,y as k,C as N}from"./index-Cq9VOZ8T.js";import{u as O}from"./ton.F8kisyBJ.js";import{u as A}from"./paginate.DgF5CfMz.js";import{u as F}from"./account.G0aekY3X.js";import{t as C}from"./throttle.P4z1NBKD.js";const D=N(a({__name:"deposit",setup(a){const{connetWallet:N}=O(),D=o(),U=c([]),V=c(),z=c({symbol:e.TON,amount:0}),{paginate:B,resetPaginate:H}=A(L,M);function L(){w(),B(((t,l)=>s.assetDepositLogs({page:t,limit:l,symbol:e.TON}))).then((e=>{U.value.push(...e||[])})).finally(h)}function M(){U.value=[],H(),L()}function P(){z.value.amount<=0?D.error("Minimum deposit amount is 0.1 TON"):C((()=>{w(),s.depositApply(z.value).then((e=>{N().then((({send:t})=>{t({to:e.payment_to,value:e.amount})}))})).finally(h)}))}return function(){const{getUserAssets:t}=F();t([e.TON]).then((e=>{V.value=e}))}(),L(),(s,a)=>{const o=b,c=g,w=v,h=T,N=j,O=r("layout-default-uni");return u(),n(O,null,{default:d((()=>[f(w,null,{default:d((()=>[f(w,{class:"flex-center flex-col px pb-24rpx pt-40rpx"},{default:d((()=>[f(o,{class:"text-md color-white"},{default:d((()=>[x(" Deposit ")])),_:1}),f(w,{class:"my-26rpx flex-y-center"},{default:d((()=>[f(c,{name:"/static/icons/ton.png",size:"50rpx"}),f(o,{class:"pl-22rpx text-lg color-white"},{default:d((()=>[x(m(("assetBalanceFormat"in s?s.assetBalanceFormat:p(t))(p(V),p(e).TON)),1)])),_:1})])),_:1}),f(w,{class:"box-border w-full flex-y-center bg-cell p-26rpx"},{default:d((()=>[f(o,{class:"text-md color-white"},{default:d((()=>[x(" Amount ")])),_:1}),f(h,{modelValue:p(z).amount,"onUpdate:modelValue":a[0]||(a[0]=e=>p(z).amount=e),"no-border":"",type:"number","custom-class":"flex-1 !flex-x-end color-white",placeholder:"Please enter"},null,8,["modelValue"])])),_:1}),f(w,{class:"my-24rpx flex-y-center"},{default:d((()=>[f(o,{class:"text-sm color-desc"},{default:d((()=>[x(" Minimum deposit amount is ")])),_:1}),f(o,{class:"px-1 text-sm color-value"},{default:d((()=>[x(" 0.1 ")])),_:1}),f(o,{class:"text-sm color-desc"},{default:d((()=>[x(" TON ")])),_:1})])),_:1}),f(w,{class:"box-border w-full flex-x-between px"},{default:d((()=>[f(N,{type:"primary",round:!1,block:"","custom-class":"rounded-3 flex-1 h-76rpx",onClick:P},{default:d((()=>[x(" Deposit ")])),_:1})])),_:1})])),_:1}),f(w,{class:"px"},{default:d((()=>[f(w,{class:"flex-x-between"},{default:d((()=>[f(w,{class:"flex-y-center"},{default:d((()=>[f(o,{class:"text-lg color-white"},{default:d((()=>[x(" Records ")])),_:1})])),_:1}),f(c,{name:"/static/icon/refresh.png",size:"40rpx",onClick:M})])),_:1}),f(w,{class:"mt-26rpx w-full"},{default:d((()=>[f(w,{class:"box-border flex-y-center flex-y-center rounded-5 bg-cell px-32rpx py-16rpx"},{default:d((()=>[f(w,{class:"w-40% flex-y-center"},{default:d((()=>[f(o,{class:"text-md color-desc"},{default:d((()=>[x(" From Address ")])),_:1})])),_:1}),f(w,{class:"w-30% flex-center"},{default:d((()=>[f(o,{class:"text-md color-desc"},{default:d((()=>[x(" $TON ")])),_:1})])),_:1}),f(w,{class:"w-30% flex-x-end"},{default:d((()=>[f(o,{class:"text-md color-desc"},{default:d((()=>[x(" Status ")])),_:1})])),_:1})])),_:1}),f(w,{class:"flex-col"},{default:d((()=>[(u(!0),i(y,null,_(p(U),((e,t)=>(u(),n(w,{key:t,class:"mt-26rpx box-border"},{default:d((()=>[f(w,{class:"m-y-14rpx flex-y-center"},{default:d((()=>[f(w,{class:"w-40% flex-y-center flex-wrap"},{default:d((()=>[f(o,{class:"text-sm color-white"},{default:d((()=>[x(m(e.from_address?("dynamicHide"in s?s.dynamicHide:p(l))(e.from_address,6,5,"*",3):"--"),1)])),_:2},1024)])),_:2},1024),f(w,{class:"w-30% flex-center flex-wrap"},{default:d((()=>[f(o,{class:"text-sm color-white"},{default:d((()=>[x(m(e.amount||0),1)])),_:2},1024)])),_:2},1024),f(w,{class:"w-30% flex-x-end flex-wrap"},{default:d((()=>[e.status_color?(u(),n(o,{key:0,class:"text-sm",style:k(`color:${e.status_color};`)},{default:d((()=>[x(m(e.status_text),1)])),_:2},1032,["style"])):(u(),n(o,{key:1,class:"text-sm color-white"},{default:d((()=>[x(m(e.status_text),1)])),_:2},1024))])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-7f94009a"]]);export{D as default};
